// ==UserScript==
// @name           PikPak íŒŒì¼ ê´€ë¦¬ì
// @name:en        PikPak File Manager
// @name:zh-CN     PikPak æ–‡ä»¶ç®¡ç†å™¨
// @name:ja        PikPak ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
// @namespace      https://github.com/poihoii/
// @version        1.0
// @description    PikPak ì›¹ ë“œë¼ì´ë¸Œë¥¼ í™•ì¥í•´ ë¹ ë¥¸ íƒìƒ‰Â·ì¤‘ë³µ ê²€ì‚¬Â·íŒŒì¼ëª… ì¼ê´„ ë³€ê²½Â·ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê³ ê¸‰ íŒŒì¼ ê´€ë¦¬ì.
// @description:en Enhances PikPak with fast navigation, duplicate scan, bulk rename, and advanced file-management tools.
// @description:zh-CN åŸºäº PikPak ç½‘é¡µ APIï¼Œæä¾›å¿«é€Ÿæµè§ˆã€é‡å¤æ–‡ä»¶æ‰«æã€æ‰¹é‡é‡å‘½åå’Œé«˜çº§ä¸‹è½½åŠŸèƒ½çš„æ–‡ä»¶ç®¡ç†å™¨ã€‚
// @description:ja PikPak ã‚’æ‹¡å¼µã—ã€é«˜é€ŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é‡è¤‡æ¤œå‡ºãƒ»ä¸€æ‹¬ãƒªãƒãƒ¼ãƒ ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’å‚™ãˆãŸé«˜æ©Ÿèƒ½ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚
// @author         poihoii
// @match          https://mypikpak.com/drive/*
// @match          https://app.mypikpak.com/*
// @match          https://drive.mypikpak.com/*
// @icon           https://raw.githubusercontent.com/poihoii/PikPak_FileManager/refs/heads/main/img/logo%20(200).svg
// @homepage       https://github.com/poihoii/PikPak_FileManager
// @grant          GM_setClipboard
// @grant          GM_setValue
// @grant          GM_getValue
// @run-at         document-idle
// @license        MIT
// ==/UserScript==

/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/api.js":
/*!********************!*\
  !*** ./src/api.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiAction: () => (/* binding */ apiAction),\n/* harmony export */   apiGet: () => (/* binding */ apiGet),\n/* harmony export */   apiList: () => (/* binding */ apiList),\n/* harmony export */   getHeaders: () => (/* binding */ getHeaders)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n\r\n\r\nfunction getHeaders() {\r\n    let token = '', captcha = '';\r\n    for (let i = 0; i < localStorage.length; i++) {\r\n        const k = localStorage.key(i);\r\n        if (k && k.startsWith('credentials')) { try { const v = JSON.parse(localStorage.getItem(k)); token = v.token_type + ' ' + v.access_token; } catch { } }\r\n        if (k && k.startsWith('captcha')) { try { const v = JSON.parse(localStorage.getItem(k)); captcha = v.captcha_token; } catch { } }\r\n    }\r\n    return { 'Content-Type': 'application/json', 'Authorization': token, 'x-device-id': localStorage.getItem('deviceid') || '', 'x-captcha-token': captcha };\r\n}\r\n\r\nasync function apiList(parentId, limit = 1000, onProgress) {\r\n    let all = [], next = null, safe = 5000;\r\n    do {\r\n        const url = `https://api-drive.mypikpak.com/drive/v1/files?thumbnail_size=SIZE_MEDIUM&limit=${limit}&parent_id=${parentId || ''}&with_audit=true${next ? `&page_token=${next}` : ''}`;\r\n        const res = await fetch(url, { headers: getHeaders() });\r\n        if (!res.ok) { if (res.status === 429) { await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.sleep)(2000); continue; } throw new Error(\"API Error \" + res.status); }\r\n        const data = await res.json();\r\n        if (data.files) {\r\n            const validFiles = data.files.filter(f => !f.trashed && f.phase === 'PHASE_TYPE_COMPLETE');\r\n            for (const f of validFiles) all.push(f);\r\n            if (onProgress) { onProgress(all.length); await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.sleep)(0); }\r\n        }\r\n        next = data.next_page_token; safe--;\r\n    } while (next && safe > 0);\r\n    return all;\r\n}\r\n\r\nasync function apiGet(id) {\r\n    const res = await fetch(`https://api-drive.mypikpak.com/drive/v1/files/${id}`, { headers: getHeaders() });\r\n    if (!res.ok) throw new Error(`API Error ${res.status}`);\r\n    return res.json();\r\n}\r\n\r\nasync function apiAction(action, data) {\r\n    const method = action.includes('batch') ? 'POST' : 'PATCH';\r\n    const res = await fetch(`https://api-drive.mypikpak.com/drive/v1/files${action}`, { method: method, headers: getHeaders(), body: JSON.stringify(data) });\r\n    if (!res.ok) {\r\n        const err = await res.json().catch(() => ({}));\r\n        throw new Error(err.error_description || `API Error ${res.status}`);\r\n    }\r\n    return res.json();\r\n}\n\n//# sourceURL=webpack://PikPak-FileManager/./src/api.js?\n}");

/***/ }),

/***/ "./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONF: () => (/* binding */ CONF)\n/* harmony export */ });\nconst CONF = {\r\n    rowHeight: 40,\r\n    buffer: 20,\r\n    logoUrl: \"https://raw.githubusercontent.com/poihoii/PikPak_FileManager/refs/heads/main/img/logo%20(200).svg\",\r\n    icons: {\r\n        refresh: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M23 4v6h-6\"></path><path d=\"M1 20v-6h6\"></path><path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\"></path></svg>`,\r\n        settings: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>`,\r\n        close: `<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg>`,\r\n        back: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m15 18-6-6 6-6\"/></svg>`,\r\n        fwd: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m9 18 6-6-6-6\"/></svg>`,\r\n        newfolder: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z\"/><line x1=\"12\" x2=\"12\" y1=\"10\" y2=\"16\"/><line x1=\"9\" x2=\"15\" y1=\"13\" y2=\"13\"/></svg>`,\r\n        del: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 6h18\"/><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"/><path d=\"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/></svg>`,\r\n        deselect: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" ry=\"2\"/><path d=\"m9 9 6 6\"/><path d=\"m15 9-6 6\"/></svg>`,\r\n        copy: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"14\" height=\"14\" x=\"8\" y=\"8\" rx=\"2\" ry=\"2\"/><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"/></svg>`,\r\n        cut: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"6\" cy=\"6\" r=\"3\"/><circle cx=\"6\" cy=\"18\" r=\"3\"/><line x1=\"20\" x2=\"8.12\" y1=\"4\" y2=\"15.88\"/><line x1=\"14.47\" x2=\"20\" y1=\"14.48\" y2=\"20\"/><line x1=\"8.12\" x2=\"12\" y1=\"8.12\" y2=\"12\"/></svg>`,\r\n        paste: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"8\" height=\"4\" x=\"8\" y=\"2\" rx=\"1\" ry=\"1\"/><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/></svg>`,\r\n        rename: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"/></svg>`,\r\n        bulkrename: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\"/><path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\"/><path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\"/></svg>`,\r\n        scan: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z\"/><circle cx=\"13\" cy=\"13\" r=\"2\"/></svg>`,\r\n        dup: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m22 8-6 4 6 4V8Z\"/><rect x=\"2\" y=\"6\" width=\"14\" height=\"12\" rx=\"2\" ry=\"2\"/></svg>`,\r\n        stop: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><rect x=\"9\" y=\"9\" width=\"6\" height=\"6\"/></svg>`,\r\n        play: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><polygon points=\"10 8 16 12 10 16 10 8\"/></svg>`,\r\n        download: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/><polyline points=\"7 10 12 15 17 10\"/><line x1=\"12\" x2=\"12\" y1=\"15\" y2=\"3\"/></svg>`,\r\n        link: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"/><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"/></svg>`,\r\n        send: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"22\" x2=\"11\" y1=\"2\" y2=\"13\"/><polygon points=\"22 2 15 22 11 13 2 9 22 2\"/></svg>`,\r\n        help: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>`\r\n    }\r\n};\n\n//# sourceURL=webpack://PikPak-FileManager/./src/config.js?\n}");

/***/ }),

/***/ "./src/languages.js":
/*!**************************!*\
  !*** ./src/languages.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLang: () => (/* binding */ getLang),\n/* harmony export */   getStrings: () => (/* binding */ getStrings)\n/* harmony export */ });\nconst T = {\r\n    ko: {\r\n        title: \"PikPak File Manager\",\r\n        col_name: \"íŒŒì¼ëª…\", col_size: \"í¬ê¸°\", col_dur: \"ê¸¸ì´\", col_date: \"ì—…ë¡œë“œ ì¼ì\",\r\n        btn_scan: \"êµ¬ì¡° í‰ë©´í™”\", tip_scan: \"ëª¨ë“  í•˜ìœ„ í´ë”ì˜ íŒŒì¼ì„ êº¼ë‚´ì˜µë‹ˆë‹¤\",\r\n        btn_stop: \"ì¤‘ì§€\", tip_stop: \"ì‘ì—… ì¤‘ì§€\",\r\n        btn_dup: \"ì¤‘ë³µ ê²€ìƒ‰\", tip_dup: \"í˜„ì¬ ëª©ë¡ì—ì„œ ì¤‘ë³µëœ ë™ì˜ìƒ íŒŒì¼ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.\",\r\n        status_ready: \"ì¤€ë¹„ë¨ ({n}ê°œ í•­ëª©)\", status_scanning: \"ìˆ˜ì§‘ ì¤‘... {n}ê°œ (í˜„ì¬: {f})\",\r\n        msg_no_files: \"í‘œì‹œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.\",\r\n        warn_del: \"ì„ íƒí•œ {n}ê°œ í•­ëª©ì„ íœ´ì§€í†µìœ¼ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\",\r\n        btn_down: \"ì›¹ ë‹¤ìš´ë¡œë“œ\", tip_down: \"ë¸Œë¼ìš°ì € ê¸°ë³¸ ë‹¤ìš´ë¡œë“œ\",\r\n        btn_aria2: \"Aria2 ì „ì†¡\", tip_aria2: \"Aria2 RPCë¡œ ë‹¤ìš´ë¡œë“œ ìš”ì²­ ì „ì†¡\",\r\n        btn_idm: \"IDM ì§ì ‘ ì—°ê²°\", tip_idm: \"IDM ë‚´ë³´ë‚´ê¸° íŒŒì¼(.ef2) ìƒì„±\",\r\n        btn_ext: \"ì™¸ë¶€ í”Œë ˆì´ì–´\", tip_ext: \"PotPlayer/VLC ë“±ìœ¼ë¡œ ì¬ìƒ (ì„¤ì • í•„ìš”)\",\r\n        loading: \"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...\",\r\n        loading_detail: \"PikPak ì„œë²„ì—ì„œ íŒŒì¼ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³  ìˆì–´ìš”...\",\r\n        loading_fetch: \"ìˆ¨ê²¨ì§„ íŒŒì¼ê¹Œì§€ ê¼¼ê¼¼íˆ ì°¾ëŠ” ì¤‘ì´ì—ìš”... ({n}ê°œ ë°œê²¬)\",\r\n        loading_dup: \"ì¤‘ë³µëœ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ìˆì–´ìš”... ({p}%)\",\r\n        sel_count: \"{n}ê°œ ì„ íƒë¨\",\r\n        tag_hash: \"Hash ì¼ì¹˜\", tag_name: \"íŒŒì¼ëª… ì¼ì¹˜\", tag_sim: \"ìœ ì‚¬ (ì‹œê°„+íŒŒì¼ëª…)\",\r\n        lbl_dup_tool: \"ì‚­ì œ ëŒ€ìƒ ì„ íƒ:\",\r\n        btn_toggle_size: \"íŒŒì¼ í¬ê¸°\", tip_toggle_size: \"ì‚­ì œí•  íŒŒì¼ ì„ íƒ ê¸°ì¤€: í¬ê¸° (í´ë¦­í•˜ì—¬ ë³€ê²½)\",\r\n        cond_small: \"ì‘ì€ íŒŒì¼\", cond_large: \"í° íŒŒì¼\",\r\n        btn_toggle_date: \"ì—…ë¡œë“œ ì¼ì\", tip_toggle_date: \"ì‚­ì œí•  íŒŒì¼ ì„ íƒ ê¸°ì¤€: ë‚ ì§œ (í´ë¦­í•˜ì—¬ ë³€ê²½)\",\r\n        cond_old: \"ì´ì „ íŒŒì¼\", cond_new: \"ìµœì‹  íŒŒì¼\",\r\n        btn_back: \"\", tip_back: \"ë’¤ë¡œ ê°€ê¸° (Backspace)\",\r\n        btn_fwd: \"\", tip_fwd: \"ì•ìœ¼ë¡œ ê°€ê¸°\",\r\n        tip_refresh: \"ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (F5)\",\r\n        btn_newfolder: \"ìƒˆ í´ë”\", tip_newfolder: \"í˜„ì¬ ìœ„ì¹˜ì— ìƒˆ í´ë” ìƒì„± (F8)\",\r\n        btn_del: \"ì‚­ì œ\", tip_del: \"ì„ íƒ í•­ëª© ì‚­ì œ (Del)\",\r\n        btn_deselect: \"ì„ íƒ ì·¨ì†Œ\", tip_deselect: \"ëª¨ë“  ì„ íƒ í•´ì œ (Esc)\",\r\n        btn_copy: \"ë³µì‚¬\", tip_copy: \"ì„ íƒ í•­ëª© ë³µì‚¬ (Ctrl+C)\",\r\n        btn_cut: \"ì´ë™\", tip_cut: \"ì„ íƒ í•­ëª© ì˜ë¼ë‚´ê¸° (Ctrl+X)\",\r\n        btn_paste: \"ë¶™ì—¬ë„£ê¸°\", tip_paste: \"ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸° (Ctrl+V)\",\r\n        btn_rename: \"íŒŒì¼ëª… ë³€ê²½\", tip_rename: \"ì„ íƒí•œ í•­ëª© íŒŒì¼ëª… ë³€ê²½ (F2)\",\r\n        btn_bulkrename: \"ì¼ê´„ ë³€ê²½\", tip_bulkrename: \"ì—¬ëŸ¬ê°œì˜ íŒŒì¼ëª…ì„ í•œë²ˆì— ë³€ê²½ (F2)\",\r\n        btn_settings: \"ì„¤ì •\", tip_settings: \"ì„¤ì • (Alt+S)\",\r\n        ctx_open: \"ì—´ê¸° / ì¬ìƒ\", ctx_rename: \"íŒŒì¼ëª… ë³€ê²½\", ctx_copy: \"ë³µì‚¬\", ctx_cut: \"ì˜ë¼ë‚´ê¸°\", ctx_del: \"ì‚­ì œ\", ctx_down: \"ë‹¤ìš´ë¡œë“œ\",\r\n        msg_newfolder_prompt: \"í´ë”ëª… \",\r\n        msg_rename_prompt: \"ìƒˆë¡œìš´ í´ë”ëª…ì„ ì…ë ¥í•˜ì„¸ìš”:\",\r\n        msg_no_selection: \"ë¨¼ì € í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.\",\r\n        msg_copy_done: \"ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë¶™ì—¬ë„£ê¸°ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        msg_cut_done: \"ì´ë™ ì¤€ë¹„ ì™„ë£Œ. ë¶™ì—¬ë„£ê¸°ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        msg_paste_empty: \"ë¶™ì—¬ë„£ì„ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.\",\r\n        msg_paste_same_folder: \"ì›ë³¸ê³¼ ë™ì¼í•œ í´ë”ì—ëŠ” ë¶™ì—¬ë„£ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n        msg_bulkrename_done: \"{n}ê°œ í•­ëª©ì˜ íŒŒì¼ëª…ì„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.\",\r\n        msg_settings_saved: \"ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.\",\r\n        msg_name_exists: \"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íŒŒì¼ëª…ì…ë‹ˆë‹¤: {n}\",\r\n        msg_dup_result: \"{n}ê°œì˜ ì¤‘ë³µ íŒŒì¼ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.\",\r\n        msg_exit_confirm: \"íŒŒì¼ íƒìƒ‰ê¸°ë¥¼ ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?\",\r\n        msg_download_fail: \"ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n        msg_flatten_warn: \"íŒŒì¼ êµ¬ì¡° í‰ë©´í™”ëŠ” í•˜ìœ„ í´ë”ì˜ ëª¨ë“  íŒŒì¼ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.\\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\",\r\n        msg_dup_warn: \"ì¤‘ë³µ íŒŒì¼ ê²€ìƒ‰ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\",\r\n        msg_batch_m3u: \"ì¬ìƒ ëª©ë¡(.m3u)ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        msg_batch_ef2: \"IDM ë‚´ë³´ë‚´ê¸°(.ef2) íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        msg_video_fail: \"ë¹„ë””ì˜¤ ë§í¬ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n        modal_rename_title: \"íŒŒì¼ëª… ë³€ê²½\",\r\n        modal_rename_multi_title: \"íŒŒì¼ëª… ì¼ê´„ ë³€ê²½\",\r\n        label_pattern: \"íŒ¨í„´ ë³€ê²½ (ì˜ˆ: Video {n})\",\r\n        label_replace: \"ë¬¸ìì—´ ì¹˜í™˜/ì‚­ì œ\",\r\n        label_replace_note: \"(ì˜ë¬¸ ëŒ€ì†Œë¬¸ì êµ¬ë¶„í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”)\",\r\n        placeholder_find: \"ì°¾ì„ ë¬¸ìì—´\",\r\n        placeholder_replace: \"ë°”ê¿€ ë¬¸ìì—´ (ê³µë€=ì‚­ì œ)\",\r\n        btn_preview: \"ë³€ê²½ ë¯¸ë¦¬ë³´ê¸°\",\r\n        modal_preview_title: \"ë³€ê²½ ë‚´ì—­ í™•ì¸\",\r\n        col_old: \"í˜„ì¬ íŒŒì¼ëª…\", col_new: \"ë³€ê²½ í›„ íŒŒì¼ëª…\",\r\n        btn_confirm: \"ë³€ê²½ í™•ì •\", btn_cancel: \"ì·¨ì†Œ\",\r\n        modal_settings_title: \"ì„¤ì •\",\r\n        label_lang: \"ì–¸ì–´ (Language)\", label_player: \"ì™¸ë¶€ í”Œë ˆì´ì–´\", label_aria2_url: \"Aria2 ì£¼ì†Œ\", label_aria2_token: \"Aria2 í† í°\",\r\n        btn_save: \"ì €ì¥\",\r\n\r\n        // ê²€ìƒ‰ ë° ë„ì›€ë§\r\n        placeholder_search: \"íŒŒì¼ëª… ê²€ìƒ‰...\",\r\n        tip_search: \"ì§€ê¸ˆ ë³´ê³  ê³„ì‹  ëª©ë¡ì—ì„œ íŒŒì¼ì„ ë°”ë¡œ ì°¾ì•„ë“œë ¤ìš”\",\r\n        btn_help: \"ë„ì›€ë§\", tip_help: \"ì‚¬ìš©ë²• ë° ë‹¨ì¶•í‚¤ ì•ˆë‚´\",\r\n        modal_help_title: \"ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?\",\r\n        help_desc: `\r\n<div style=\"font-size:13px; line-height:1.7; color:var(--pk-fg);\">\r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ” ì›í•˜ëŠ” íŒŒì¼ ì°¾ê¸° (Search)</b><br>\r\n        ìƒë‹¨ ê²€ìƒ‰ì°½ì— ë‹¨ì–´ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”.<br>\r\n        ì§€ê¸ˆ í™”ë©´ì— ë³´ì´ëŠ” ëª©ë¡ì—ì„œ í•´ë‹¹ íŒŒì¼ì„ <b>ì¦‰ì‹œ ì°¾ì•„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</b><br>\r\n        <span style=\"color:#888; font-size:12px;\">â€» 'êµ¬ì¡° í‰ë©´í™”' í›„ ê²€ìƒ‰í•˜ë©´ ì „ì²´ íŒŒì¼ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”!</span>\r\n    </div>\r\n    \r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ“‚ ëª¨ë“  íŒŒì¼ í•œëˆˆì— ë³´ê¸° (Flatten)</b><br>\r\n        í´ë” ì†ì— ê¹Šìˆ™ì´ ìˆ¨ì–´ìˆëŠ” íŒŒì¼ë“¤ì„ ì°¾ê¸° í˜ë“œì…¨ë‚˜ìš”?<br>\r\n        <b>'êµ¬ì¡° í‰ë©´í™”'</b> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ëª¨ë“  íŒŒì¼ì„ ë°–ìœ¼ë¡œ êº¼ë‚´ ë³´ì—¬ë“œë ¤ìš”.<br>\r\n        <span style=\"color:#888; font-size:12px;\">â€» ê´€ë¦¬ê°€ ëë‚˜ë©´ 'ìƒˆë¡œê³ ì¹¨(F5)'ì„ ëˆŒëŸ¬ ì›ë˜ëŒ€ë¡œ ëŒì•„ê°€ì„¸ìš”.</span>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:20px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ§¹ ì¤‘ë³µ íŒŒì¼ ì •ë¦¬ (Deduplication)</b><br>\r\n        ë˜‘ê°™ì€ íŒŒì¼ì´ ì—¬ëŸ¬ ê°œë¼ ìš©ëŸ‰ì„ ì°¨ì§€í•˜ê³  ìˆë‚˜ìš”?<br>\r\n        <b>í¬ê¸°</b>ë‚˜ <b>ë‚ ì§œ</b>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µëœ íŒŒì¼ì„ ì™ì™ ê³¨ë¼ë“œë¦´ê²Œìš”.<br>\r\n        ìë™ ì„ íƒëœ íŒŒì¼ì„ í™•ì¸í•˜ê³  <b>'ì‚­ì œ'</b> ë²„íŠ¼ë§Œ ëˆ„ë¥´ë©´ ì •ë¦¬ê°€ ëë‚©ë‹ˆë‹¤.\r\n    </div>\r\n    \r\n    <div>\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">âŒ¨ï¸ í¸ë¦¬í•œ ë‹¨ì¶•í‚¤</b>\r\n        <table class=\"pk-help-table\">\r\n            <tr><td width=\"100\"><b>F2</b></td><td>ì´ë¦„ ë³€ê²½ / ì¼ê´„ ë³€ê²½</td></tr>\r\n            <tr><td><b>F5</b></td><td>ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (ì´ˆê¸°í™”)</td></tr>\r\n            <tr><td><b>F8</b></td><td>ìƒˆ í´ë” ë§Œë“¤ê¸°</td></tr>\r\n            <tr><td><b>Del</b></td><td>ì„ íƒ í•­ëª© íœ´ì§€í†µìœ¼ë¡œ ì´ë™</td></tr>\r\n            <tr><td><b>Ctrl+A</b></td><td>ì „ì²´ ì„ íƒ</td></tr>\r\n            <tr><td><b>Ctrl+C/V</b></td><td>íŒŒì¼ ë³µì‚¬ / ë¶™ì—¬ë„£ê¸°</td></tr>\r\n            <tr><td><b>Alt+S</b></td><td>í™˜ê²½ ì„¤ì •</td></tr>\r\n            <tr><td><b>Esc</b></td><td>ì„ íƒ í•´ì œ / ì°½ ë‹«ê¸°</td></tr>\r\n        </table>\r\n    </div>\r\n</div>`\r\n    },\r\n    en: {\r\n        title: \"PikPak File Manager\",\r\n        col_name: \"Name\", col_size: \"Size\", col_dur: \"Duration\", col_date: \"Date Modified\",\r\n        btn_scan: \"Flatten\", tip_scan: \"Flatten folder structure\",\r\n        btn_stop: \"Stop\", tip_stop: \"Stop operation\",\r\n        btn_dup: \"Find Dups\", tip_dup: \"Find duplicate video files\",\r\n        status_ready: \"Ready ({n} items)\", status_scanning: \"Scanning... {n} items (Cur: {f})\",\r\n        msg_no_files: \"No items.\",\r\n        warn_del: \"Trash {n} items?\",\r\n        btn_down: \"Download\", tip_down: \"Download with browser\",\r\n        btn_aria2: \"Aria2\", tip_aria2: \"Send to Aria2 RPC\",\r\n        btn_idm: \"IDM\", tip_idm: \"Export IDM (.ef2)\",\r\n        btn_ext: \"Play Ext\", tip_ext: \"Play with PotPlayer/VLC\",\r\n        loading: \"Loading...\", loading_detail: \"Fetching...\", loading_fetch: \"Fetching... ({n})\", loading_dup: \"Analyzing... ({p}%)\",\r\n        sel_count: \"{n} selected\",\r\n        tag_hash: \"Hash Match\", tag_name: \"Name Match\", tag_sim: \"Similar\",\r\n        lbl_dup_tool: \"Auto Select:\",\r\n        btn_toggle_size: \"Size\", tip_toggle_size: \"Select by Size\", cond_small: \"Smallest\", cond_large: \"Largest\",\r\n        btn_toggle_date: \"Date\", tip_toggle_date: \"Select by Date\", cond_old: \"Oldest\", cond_new: \"Newest\",\r\n        btn_back: \"\", tip_back: \"Back\",\r\n        btn_fwd: \"\", tip_fwd: \"Forward\",\r\n        tip_refresh: \"Refresh (F5)\",\r\n        btn_newfolder: \"New Folder\", tip_newfolder: \"New Folder (F8)\",\r\n        btn_del: \"Delete\", tip_del: \"Delete (Del)\",\r\n        btn_deselect: \"Deselect\", tip_deselect: \"Clear (Esc)\",\r\n        btn_copy: \"Copy\", tip_copy: \"Copy (Ctrl+C)\",\r\n        btn_cut: \"Cut\", tip_cut: \"Cut (Ctrl+X)\",\r\n        btn_paste: \"Paste\", tip_paste: \"Paste (Ctrl+V)\",\r\n        btn_rename: \"Rename\", tip_rename: \"Rename (F2)\",\r\n        btn_bulkrename: \"Bulk Rename\", tip_bulkrename: \"Bulk Rename (F2)\",\r\n        btn_settings: \"Settings\", tip_settings: \"Settings (Alt+S)\",\r\n        ctx_open: \"Open\", ctx_rename: \"Rename\", ctx_copy: \"Copy\", ctx_cut: \"Cut\", ctx_del: \"Delete\", ctx_down: \"Download\",\r\n        msg_newfolder_prompt: \"Folder name\", msg_rename_prompt: \"New name:\", msg_no_selection: \"Select items first.\",\r\n        msg_copy_done: \"Copied.\", msg_cut_done: \"Cut ready.\", msg_paste_empty: \"Nothing to paste.\",\r\n        msg_paste_same_folder: \"Same folder.\", msg_bulkrename_done: \"Renamed {n} items.\", msg_settings_saved: \"Saved.\",\r\n        msg_name_exists: \"Exists: {n}\", msg_dup_result: \"Found {n} groups.\", msg_exit_confirm: \"Close?\",\r\n        msg_download_fail: \"Failed to get links.\", msg_flatten_warn: \"Flatten subfolders?\", msg_dup_warn: \"Start duplicate scan?\",\r\n        msg_batch_m3u: \"M3U generated.\", msg_batch_ef2: \"EF2 generated.\", msg_video_fail: \"No video link.\",\r\n        modal_rename_title: \"Rename\", modal_rename_multi_title: \"Bulk Rename\", label_pattern: \"Pattern\", label_replace: \"Replace\", label_replace_note: \"(Case sensitive)\",\r\n        placeholder_find: \"Find\", placeholder_replace: \"Replace\", btn_preview: \"Preview\", modal_preview_title: \"Confirm\",\r\n        col_old: \"Old\", col_new: \"New\", btn_confirm: \"Confirm\", btn_cancel: \"Cancel\",\r\n        modal_settings_title: \"Settings\", label_lang: \"Language\", label_player: \"Player\", label_aria2_url: \"Aria2 URL\", label_aria2_token: \"Token\", btn_save: \"Save\",\r\n\r\n        placeholder_search: \"Search files...\",\r\n        tip_search: \"Search files (Filter current list)\",\r\n        btn_help: \"Help\", tip_help: \"Shortcuts & Usage\",\r\n        modal_help_title: \"Help & Usage\",\r\n        help_desc: `\r\n<div style=\"font-size:13px; line-height:1.6; color:var(--pk-fg);\">\r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ” Search</b><br>\r\n        - Filters files in the current list instantly.<br>\r\n        - Use with 'Flatten' to search the entire drive.<br>\r\n    </div>\r\n    \r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ“‚ Flatten</b><br>\r\n        - Retrieves all files from subfolders into a single list.<br>\r\n        - Press 'Refresh (F5)' to return to normal view.<br>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:20px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ§¹ Deduplication</b><br>\r\n        - <b>Size</b>: Selects duplicate files based on largest/smallest size.<br>\r\n        - <b>Date</b>: Selects based on oldest/newest upload date.<br>\r\n    </div>\r\n    \r\n    <div>\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">âŒ¨ï¸ Shortcuts</b>\r\n        <table class=\"pk-help-table\">\r\n            <tr><td width=\"100\"><b>F2</b></td><td>Rename / Bulk Rename</td></tr>\r\n            <tr><td><b>F5</b></td><td>Refresh</td></tr>\r\n            <tr><td><b>F8</b></td><td>New Folder</td></tr>\r\n            <tr><td><b>Del</b></td><td>Delete items</td></tr>\r\n            <tr><td><b>Ctrl+A</b></td><td>Select All</td></tr>\r\n            <tr><td><b>Ctrl+C/V</b></td><td>Copy / Paste</td></tr>\r\n            <tr><td><b>Alt+S</b></td><td>Settings</td></tr>\r\n            <tr><td><b>Esc</b></td><td>Deselect / Close</td></tr>\r\n        </table>\r\n    </div>\r\n</div>`\r\n    },\r\n    ja: {\r\n        title: \"PikPak ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\",\r\n        col_name: \"åå‰\", col_size: \"ã‚µã‚¤ã‚º\", col_dur: \"æ™‚é–“\", col_date: \"æ›´æ–°æ—¥\",\r\n        btn_scan: \"æ§‹é€ å¹³å¦åŒ–\", tip_scan: \"ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼å†…ã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¾åœ¨ã®ãƒªã‚¹ãƒˆã«ç§»å‹•ã—ã¾ã™\",\r\n        btn_stop: \"åœæ­¢\", tip_stop: \"ä½œæ¥­ã‚’åœæ­¢\",\r\n        btn_dup: \"é‡è¤‡æ¤œç´¢\", tip_dup: \"ç¾åœ¨ã®ãƒªã‚¹ãƒˆã‹ã‚‰é‡è¤‡ã—ãŸå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã¾ã™\",\r\n        status_ready: \"æº–å‚™å®Œäº† ({n} é …ç›®)\", status_scanning: \"åé›†ä¸­... {n} (ç¾åœ¨: {f})\",\r\n        msg_no_files: \"é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“ã€‚\",\r\n        warn_del: \"é¸æŠã—ãŸ {n} é …ç›®ã‚’ã‚´ãƒŸç®±ã«ç§»å‹•ã—ã¾ã™ã‹ï¼Ÿ\",\r\n        btn_down: \"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\", tip_down: \"ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\",\r\n        btn_aria2: \"Aria2\", tip_aria2: \"Aria2 RPCã¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰è¦æ±‚ã‚’é€ä¿¡\",\r\n        btn_idm: \"IDM\", tip_idm: \"IDMã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«(.ef2)ã‚’ä½œæˆ\",\r\n        btn_ext: \"å¤–éƒ¨å†ç”Ÿ\", tip_ext: \"PotPlayer/VLCãªã©ã§å†ç”Ÿ (è¨­å®šãŒå¿…è¦)\",\r\n        loading: \"èª­ã¿è¾¼ã¿ä¸­...\",\r\n        loading_detail: \"ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’å–å¾—ä¸­...\",\r\n        loading_fetch: \"ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—ä¸­... ({n})\",\r\n        loading_dup: \"é‡è¤‡åˆ†æä¸­... ({p}%)\",\r\n        sel_count: \"{n} é¸æŠæ¸ˆã¿\",\r\n        tag_hash: \"Hashä¸€è‡´\", tag_name: \"åå‰ä¸€è‡´\", tag_sim: \"é¡ä¼¼ (æ™‚é–“+åå‰)\",\r\n        lbl_dup_tool: \"å‰Šé™¤å¯¾è±¡é¸æŠ:\",\r\n        btn_toggle_size: \"ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º\", tip_toggle_size: \"å‰Šé™¤åŸºæº–: ã‚µã‚¤ã‚º (ã‚¯ãƒªãƒƒã‚¯ã§å¤‰æ›´)\",\r\n        cond_small: \"å°ã•ã„é †\", cond_large: \"å¤§ãã„é †\",\r\n        btn_toggle_date: \"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥\", tip_toggle_date: \"å‰Šé™¤åŸºæº–: æ—¥ä»˜ (ã‚¯ãƒªãƒƒã‚¯ã§å¤‰æ›´)\",\r\n        cond_old: \"å¤ã„é †\", cond_new: \"æ–°ã—ã„é †\",\r\n        btn_back: \"\", tip_back: \"æˆ»ã‚‹ (Backspace)\",\r\n        btn_fwd: \"\", tip_fwd: \"é€²ã‚€\",\r\n        tip_refresh: \"æ›´æ–° (F5)\",\r\n        btn_newfolder: \"æ–°è¦ãƒ•ã‚©ãƒ«ãƒ€\", tip_newfolder: \"ç¾åœ¨ã®å ´æ‰€ã«ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ (F8)\",\r\n        btn_del: \"å‰Šé™¤\", tip_del: \"é¸æŠé …ç›®ã‚’å‰Šé™¤ (Del)\",\r\n        btn_deselect: \"é¸æŠè§£é™¤\", tip_deselect: \"å…¨é¸æŠè§£é™¤ (Esc)\",\r\n        btn_copy: \"ã‚³ãƒ”ãƒ¼\", tip_copy: \"é¸æŠé …ç›®ã‚’ã‚³ãƒ”ãƒ¼ (Ctrl+C)\",\r\n        btn_cut: \"åˆ‡ã‚Šå–ã‚Š\", tip_cut: \"é¸æŠé …ç›®ã‚’åˆ‡ã‚Šå–ã‚Š (Ctrl+X)\",\r\n        btn_paste: \"è²¼ã‚Šä»˜ã‘\", tip_paste: \"ã“ã“ã«è²¼ã‚Šä»˜ã‘ (Ctrl+V)\",\r\n        btn_rename: \"åå‰å¤‰æ›´\", tip_rename: \"é¸æŠé …ç›®ã®åå‰ã‚’å¤‰æ›´ (F2)\",\r\n        btn_bulkrename: \"ä¸€æ‹¬å¤‰æ›´\", tip_bulkrename: \"è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¦å‰‡çš„ã«å¤‰æ›´ (F2)\",\r\n        btn_settings: \"è¨­å®š\", tip_settings: \"è¨­å®š (Alt+S)\",\r\n        ctx_open: \"é–‹ã / å†ç”Ÿ\", ctx_rename: \"åå‰å¤‰æ›´\", ctx_copy: \"ã‚³ãƒ”ãƒ¼\", ctx_cut: \"åˆ‡ã‚Šå–ã‚Š\", ctx_del: \"å‰Šé™¤\", ctx_down: \"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\",\r\n        msg_newfolder_prompt: \"ãƒ•ã‚©ãƒ«ãƒ€å\",\r\n        msg_rename_prompt: \"æ–°ã—ã„åå‰ã‚’å…¥åŠ›:\",\r\n        msg_no_selection: \"å…ˆã«é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚\",\r\n        msg_copy_done: \"ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚è²¼ã‚Šä»˜ã‘ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸã€‚\",\r\n        msg_cut_done: \"ç§»å‹•æº–å‚™å®Œäº†ã€‚è²¼ã‚Šä»˜ã‘ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸã€‚\",\r\n        msg_paste_empty: \"è²¼ã‚Šä»˜ã‘ã‚‹é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“ã€‚\",\r\n        msg_paste_same_folder: \"åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯è²¼ã‚Šä»˜ã‘ã§ãã¾ã›ã‚“ã€‚\",\r\n        msg_bulkrename_done: \"{n} å€‹ã®é …ç›®ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€‚\",\r\n        msg_settings_saved: \"è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¾ã™ã€‚\",\r\n        msg_name_exists: \"ã™ã§ã«å­˜åœ¨ã™ã‚‹åå‰ã§ã™: {n}\",\r\n        msg_dup_result: \"{n} ã‚°ãƒ«ãƒ¼ãƒ—ã®é‡è¤‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚\",\r\n        msg_exit_confirm: \"ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’é–‰ã˜ã¾ã™ã‹ï¼Ÿ\",\r\n        msg_download_fail: \"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\",\r\n        msg_flatten_warn: \"ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’å¹³å¦åŒ–ã—ã€ã™ã¹ã¦ã®ã‚µãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã¾ã™ã€‚\\nç¶šã‘ã¾ã™ã‹ï¼Ÿ\",\r\n        msg_dup_warn: \"é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ\",\r\n        msg_batch_m3u: \"ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ(.m3u)ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚\",\r\n        msg_batch_ef2: \"IDMã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ(.ef2)ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚\",\r\n        msg_video_fail: \"å‹•ç”»ãƒªãƒ³ã‚¯ã‚’å–å¾—ã§ãã¾ã›ã‚“ã€‚\",\r\n        modal_rename_title: \"åå‰å¤‰æ›´\", modal_rename_multi_title: \"ä¸€æ‹¬åå‰å¤‰æ›´\", label_pattern: \"ãƒ‘ã‚¿ãƒ¼ãƒ³ (ä¾‹: Video {n})\", label_replace: \"æ–‡å­—åˆ—ç½®æ›/å‰Šé™¤\", label_replace_note: \"(å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥)\",\r\n        placeholder_find: \"æ¤œç´¢æ–‡å­—åˆ—\", placeholder_replace: \"ç½®æ›æ–‡å­—åˆ— (ç©ºæ¬„=å‰Šé™¤)\", btn_preview: \"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\", modal_preview_title: \"å¤‰æ›´ç¢ºèª\",\r\n        col_old: \"ç¾åœ¨ã®åå‰\", col_new: \"å¤‰æ›´å¾Œã®åå‰\", btn_confirm: \"ç¢ºå®š\", btn_cancel: \"ã‚­ãƒ£ãƒ³ã‚»ãƒ«\",\r\n        modal_settings_title: \"è¨­å®š\", label_lang: \"è¨€èª (Language)\", label_player: \"å¤–éƒ¨ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼\", label_aria2_url: \"Aria2 URL\", label_aria2_token: \"ãƒˆãƒ¼ã‚¯ãƒ³\", btn_save: \"ä¿å­˜\",\r\n\r\n        placeholder_search: \"æ¤œç´¢...\",\r\n        tip_search: \"æ¤œç´¢ (ç¾åœ¨ã®ãƒªã‚¹ãƒˆå†…)\",\r\n        btn_help: \"ãƒ˜ãƒ«ãƒ—\", tip_help: \"ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã¨ä½¿ã„æ–¹\",\r\n        modal_help_title: \"ãƒ˜ãƒ«ãƒ—ã¨ä½¿ã„æ–¹\",\r\n        help_desc: `\r\n<div style=\"font-size:13px; line-height:1.6; color:var(--pk-fg);\">\r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ” æ¤œç´¢ (Search)</b><br>\r\n        - ç¾åœ¨ã®ãƒªã‚¹ãƒˆã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å³åº§ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚<br>\r\n        - ã€Œæ§‹é€ å¹³å¦åŒ–ã€æ©Ÿèƒ½ã¨ä½µç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ©ã‚¤ãƒ–å…¨ä½“ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã§ãã¾ã™ã€‚<br>\r\n    </div>\r\n    \r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ“‚ æ§‹é€ å¹³å¦åŒ– (Flatten)</b><br>\r\n        - ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã«å«ã¾ã‚Œã‚‹ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã€ä¸€ã¤ã®ãƒªã‚¹ãƒˆã«ã¾ã¨ã‚ã¾ã™ã€‚<br>\r\n        - ä½œæ¥­ãŒçµ‚ã‚ã£ãŸã‚‰ã€Œæ›´æ–° (F5)ã€ã‚’æŠ¼ã—ã¦å…ƒã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã«æˆ»ã£ã¦ãã ã•ã„ã€‚<br>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:20px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ§¹ é‡è¤‡æ•´ç† (Deduplication)</b><br>\r\n        - <b>ã‚µã‚¤ã‚º</b>: é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã§ã€å®¹é‡ãŒæœ€ã‚‚å¤§ãã„ï¼ˆã¾ãŸã¯å°ã•ã„ï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ®‹ã—ã¦é¸æŠã—ã¾ã™ã€‚<br>\r\n        - <b>æ—¥ä»˜</b>: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚ãŒæœ€ã‚‚å¤ã„ï¼ˆã¾ãŸã¯æ–°ã—ã„ï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ®‹ã—ã¦é¸æŠã—ã¾ã™ã€‚<br>\r\n    </div>\r\n    \r\n    <div>\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">âŒ¨ï¸ ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼</b>\r\n        <table class=\"pk-help-table\">\r\n            <tr><td width=\"100\"><b>F2</b></td><td>åå‰å¤‰æ›´ / ä¸€æ‹¬å¤‰æ›´</td></tr>\r\n            <tr><td><b>F5</b></td><td>ãƒªã‚¹ãƒˆæ›´æ–°</td></tr>\r\n            <tr><td><b>F8</b></td><td>æ–°è¦ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ</td></tr>\r\n            <tr><td><b>Del</b></td><td>é¸æŠé …ç›®ã‚’å‰Šé™¤ (ã‚´ãƒŸç®±)</td></tr>\r\n            <tr><td><b>Ctrl+A</b></td><td>å…¨é¸æŠ</td></tr>\r\n            <tr><td><b>Ctrl+C/V</b></td><td>ã‚³ãƒ”ãƒ¼ / è²¼ã‚Šä»˜ã‘</td></tr>\r\n            <tr><td><b>Alt+S</b></td><td>è¨­å®š (Settings)</td></tr>\r\n            <tr><td><b>Esc</b></td><td>é¸æŠè§£é™¤ / é–‰ã˜ã‚‹</td></tr>\r\n        </table>\r\n    </div>\r\n</div>`\r\n    },\r\n    zh: {\r\n        title: \"PikPak æ–‡ä»¶ç®¡ç†å™¨\",\r\n        col_name: \"åç§°\", col_size: \"å¤§å°\", col_dur: \"æ—¶é•¿\", col_date: \"ä¿®æ”¹æ—¥æœŸ\",\r\n        btn_scan: \"ç»“æ„æ‰å¹³åŒ–\", tip_scan: \"è·å–å­æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶\",\r\n        btn_stop: \"åœæ­¢\", tip_stop: \"åœæ­¢æ“ä½œ\",\r\n        btn_dup: \"æŸ¥æ‰¾é‡å¤\", tip_dup: \"åœ¨å½“å‰åˆ—è¡¨ä¸­æŸ¥æ‰¾é‡å¤è§†é¢‘\",\r\n        status_ready: \"å°±ç»ª ({n} é¡¹)\", status_scanning: \"æ‰«æä¸­... {n} (å½“å‰: {f})\",\r\n        msg_no_files: \"æ²¡æœ‰é¡¹ç›®ã€‚\",\r\n        warn_del: \"ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ {n} é¡¹å—ï¼Ÿ\",\r\n        btn_down: \"ä¸‹è½½\", tip_down: \"ä½¿ç”¨æµè§ˆå™¨ä¸‹è½½\",\r\n        btn_aria2: \"å‘é€ Aria2\", tip_aria2: \"å‘é€åˆ° Aria2 RPC\",\r\n        btn_idm: \"IDM\", tip_idm: \"å¯¼å‡º IDM æ–‡ä»¶ (.ef2)\",\r\n        btn_ext: \"å¤–éƒ¨æ’­æ”¾\", tip_ext: \"ä½¿ç”¨ PotPlayer/VLC æ’­æ”¾ (éœ€è®¾ç½®)\",\r\n        loading: \"åŠ è½½ä¸­...\",\r\n        loading_detail: \"æ­£åœ¨è·å–æ–‡ä»¶åˆ—è¡¨...\",\r\n        loading_fetch: \"è·å–ä¸­... ({n})\",\r\n        loading_dup: \"åˆ†æé‡å¤é¡¹... ({p}%)\",\r\n        sel_count: \"é€‰ä¸­ {n} é¡¹\",\r\n        tag_hash: \"å“ˆå¸ŒåŒ¹é…\", tag_name: \"åç§°åŒ¹é…\", tag_sim: \"ç›¸ä¼¼ (æ—¶é•¿+åç§°)\",\r\n        lbl_dup_tool: \"é€‰æ‹©åˆ é™¤å¯¹è±¡:\",\r\n        btn_toggle_size: \"æ–‡ä»¶å¤§å°\", tip_toggle_size: \"åˆ é™¤æ ‡å‡†: å¤§å° (ç‚¹å‡»åˆ‡æ¢)\",\r\n        cond_small: \"ä¿ç•™æœ€å¤§\", cond_large: \"ä¿ç•™æœ€å°\",\r\n        btn_toggle_date: \"ä¸Šä¼ æ—¥æœŸ\", tip_toggle_date: \"åˆ é™¤æ ‡å‡†: æ—¥æœŸ (ç‚¹å‡»åˆ‡æ¢)\",\r\n        cond_old: \"ä¿ç•™æœ€æ–°\", cond_new: \"ä¿ç•™æœ€æ—§\",\r\n        btn_back: \"\", tip_back: \"è¿”å› (Backspace)\",\r\n        btn_fwd: \"\", tip_fwd: \"å‰è¿›\",\r\n        tip_refresh: \"åˆ·æ–° (F5)\",\r\n        btn_newfolder: \"æ–°å»ºæ–‡ä»¶å¤¹\", tip_newfolder: \"åœ¨å½“å‰ä½ç½®åˆ›å»ºæ–‡ä»¶å¤¹ (F8)\",\r\n        btn_del: \"åˆ é™¤\", tip_del: \"åˆ é™¤é€‰ä¸­é¡¹ (Del)\",\r\n        btn_deselect: \"å–æ¶ˆé€‰æ‹©\", tip_deselect: \"å–æ¶ˆæ‰€æœ‰é€‰æ‹© (Esc)\",\r\n        btn_copy: \"å¤åˆ¶\", tip_copy: \"å¤åˆ¶é€‰ä¸­é¡¹ (Ctrl+C)\",\r\n        btn_cut: \"å‰ªåˆ‡\", tip_cut: \"å‰ªåˆ‡é€‰ä¸­é¡¹ (Ctrl+X)\",\r\n        btn_paste: \"ç²˜è´´\", tip_paste: \"ç²˜è´´åˆ°æ­¤å¤„ (Ctrl+V)\",\r\n        btn_rename: \"é‡å‘½å\", tip_rename: \"é‡å‘½åé€‰ä¸­é¡¹ (F2)\",\r\n        btn_bulkrename: \"æ‰¹é‡é‡å‘½å\", tip_bulkrename: \"æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å (F2)\",\r\n        btn_settings: \"è®¾ç½®\", tip_settings: \"è®¾ç½® (Alt+S)\",\r\n        ctx_open: \"æ‰“å¼€ / æ’­æ”¾\", ctx_rename: \"é‡å‘½å\", ctx_copy: \"å¤åˆ¶\", ctx_cut: \"å‰ªåˆ‡\", ctx_del: \"åˆ é™¤\", ctx_down: \"ä¸‹è½½\",\r\n        msg_newfolder_prompt: \"æ–‡ä»¶å¤¹åç§°\",\r\n        msg_rename_prompt: \"è¾“å…¥æ–°åç§°:\",\r\n        msg_no_selection: \"è¯·å…ˆé€‰æ‹©é¡¹ç›®ã€‚\",\r\n        msg_copy_done: \"å·²å¤åˆ¶ã€‚è¯·é€‰æ‹©ç²˜è´´ä½ç½®ã€‚\",\r\n        msg_cut_done: \"å·²å‰ªåˆ‡ã€‚è¯·é€‰æ‹©ç²˜è´´ä½ç½®ã€‚\",\r\n        msg_paste_empty: \"æ²¡æœ‰å¯ç²˜è´´çš„é¡¹ç›®ã€‚\",\r\n        msg_paste_same_folder: \"æ— æ³•ç²˜è´´åˆ°æºæ–‡ä»¶å¤¹ã€‚\",\r\n        msg_bulkrename_done: \"å·²é‡å‘½å {n} ä¸ªé¡¹ç›®ã€‚\",\r\n        msg_settings_saved: \"è®¾ç½®å·²ä¿å­˜ã€‚é¡µé¢å°†åˆ·æ–°ã€‚\",\r\n        msg_name_exists: \"åç§°å·²å­˜åœ¨: {n}\",\r\n        msg_dup_result: \"å‘ç° {n} ç»„é‡å¤é¡¹ã€‚\",\r\n        msg_exit_confirm: \"ç¡®å®šè¦å…³é—­æ–‡ä»¶ç®¡ç†å™¨å—ï¼Ÿ\",\r\n        msg_download_fail: \"æ— æ³•è·å–ä¸‹è½½é“¾æ¥ã€‚\",\r\n        msg_flatten_warn: \"ç»“æ„æ‰å¹³åŒ–å°†æœç´¢æ‰€æœ‰å­æ–‡ä»¶å¤¹ã€‚\\næ˜¯å¦ç»§ç»­ï¼Ÿ\",\r\n        msg_dup_warn: \"æ˜¯å¦å¼€å§‹æœç´¢é‡å¤æ–‡ä»¶ï¼Ÿ\",\r\n        msg_batch_m3u: \"å·²ç”Ÿæˆæ’­æ”¾åˆ—è¡¨ (.m3u)ã€‚\",\r\n        msg_batch_ef2: \"å·²ç”Ÿæˆ IDM å¯¼å‡ºæ–‡ä»¶ (.ef2)ã€‚\",\r\n        msg_video_fail: \"æ— æ³•è·å–è§†é¢‘é“¾æ¥ã€‚\",\r\n        modal_rename_title: \"é‡å‘½å\", modal_rename_multi_title: \"æ‰¹é‡é‡å‘½å\", label_pattern: \"æ¨¡å¼ (ä¾‹: Video {n})\", label_replace: \"æ›¿æ¢/åˆ é™¤\", label_replace_note: \"(åŒºåˆ†å¤§å°å†™)\",\r\n        placeholder_find: \"æŸ¥æ‰¾å†…å®¹\", placeholder_replace: \"æ›¿æ¢ä¸º (ç•™ç©ºåˆ é™¤)\", btn_preview: \"é¢„è§ˆ\", modal_preview_title: \"ç¡®è®¤æ›´æ”¹\",\r\n        col_old: \"åŸåç§°\", col_new: \"æ–°åç§°\", btn_confirm: \"ç¡®å®š\", btn_cancel: \"å–æ¶ˆ\",\r\n        modal_settings_title: \"è®¾ç½®\", label_lang: \"è¯­è¨€ (Language)\", label_player: \"å¤–éƒ¨æ’­æ”¾å™¨\", label_aria2_url: \"Aria2 åœ°å€\", label_aria2_token: \"Token\", btn_save: \"ä¿å­˜\",\r\n\r\n        placeholder_search: \"æœç´¢æ–‡ä»¶...\",\r\n        tip_search: \"æœç´¢ (ç­›é€‰å½“å‰åˆ—è¡¨)\",\r\n        btn_help: \"å¸®åŠ©\", tip_help: \"å¿«æ·é”®ä¸ä½¿ç”¨è¯´æ˜\",\r\n        modal_help_title: \"ä½¿ç”¨è¯´æ˜\",\r\n        help_desc: `\r\n<div style=\"font-size:13px; line-height:1.6; color:var(--pk-fg);\">\r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ” æœç´¢ (Search)</b><br>\r\n        - å³æ—¶ç­›é€‰å½“å‰åŠ è½½çš„æ–‡ä»¶åˆ—è¡¨ã€‚<br>\r\n        - é…åˆâ€œç»“æ„æ‰å¹³åŒ–â€åŠŸèƒ½ä½¿ç”¨ï¼Œå¯å®ç°å…¨ç›˜æ–‡ä»¶æœç´¢ã€‚<br>\r\n    </div>\r\n    \r\n    <div style=\"margin-bottom:15px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ“‚ ç»“æ„æ‰å¹³åŒ– (Flatten)</b><br>\r\n        - é€’å½’æå–æ‰€æœ‰å­æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚<br>\r\n        - ç®¡ç†å®Œæˆåï¼Œè¯·æŒ‰â€œåˆ·æ–° (F5)â€è¿”å›åŸå§‹æ–‡ä»¶å¤¹ç»“æ„ã€‚<br>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:20px;\">\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">ğŸ§¹ é‡å¤æ•´ç† (Deduplication)</b><br>\r\n        - <b>æ–‡ä»¶å¤§å°</b>: åœ¨é‡å¤ç»„ä¸­ä¿ç•™æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰çš„æ–‡ä»¶ï¼Œé€‰ä¸­å…¶ä½™æ–‡ä»¶ã€‚<br>\r\n        - <b>ä¸Šä¼ æ—¥æœŸ</b>: ä¿ç•™æœ€æ—©ï¼ˆæˆ–æœ€æ–°ï¼‰ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé€‰ä¸­å…¶ä½™æ–‡ä»¶ã€‚<br>\r\n    </div>\r\n    \r\n    <div>\r\n        <b style=\"font-size:14px; color:var(--pk-pri);\">âŒ¨ï¸ å¿«æ·é”®</b>\r\n        <table class=\"pk-help-table\">\r\n            <tr><td width=\"100\"><b>F2</b></td><td>é‡å‘½å / æ‰¹é‡é‡å‘½å</td></tr>\r\n            <tr><td><b>F5</b></td><td>åˆ·æ–°åˆ—è¡¨</td></tr>\r\n            <tr><td><b>F8</b></td><td>æ–°å»ºæ–‡ä»¶å¤¹</td></tr>\r\n            <tr><td><b>Del</b></td><td>åˆ é™¤é€‰ä¸­é¡¹ (å›æ”¶ç«™)</td></tr>\r\n            <tr><td><b>Ctrl+A</b></td><td>å…¨é€‰</td></tr>\r\n            <tr><td><b>Ctrl+C/V</b></td><td>å¤åˆ¶ / ç²˜è´´</td></tr>\r\n            <tr><td><b>Alt+S</b></td><td>è®¾ç½® (Settings)</td></tr>\r\n            <tr><td><b>Esc</b></td><td>å–æ¶ˆé€‰æ‹© / å…³é—­</td></tr>\r\n        </table>\r\n    </div>\r\n</div>`\r\n    }\r\n};\r\n\r\nfunction getLang() {\r\n    const userLang = GM_getValue('pk_lang', '');\r\n    return userLang ? userLang : (navigator.language.startsWith('ko') ? 'ko' : 'en');\r\n}\r\n\r\nfunction getStrings() {\r\n    return T[getLang()] || T.en;\r\n}\n\n//# sourceURL=webpack://PikPak-FileManager/./src/languages.js?\n}");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/config.js\");\n/* harmony import */ var _style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style */ \"./src/style.js\");\n/* harmony import */ var _languages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./languages */ \"./src/languages.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api */ \"./src/api.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconsole.log(\"ğŸš€ PikPak Script: LOADED from main.js\");\r\n\r\nconst L = (0,_languages__WEBPACK_IMPORTED_MODULE_2__.getStrings)();\r\nconst lang = (0,_languages__WEBPACK_IMPORTED_MODULE_2__.getLang)();\r\n\r\nasync function openManager() {\r\n    if (document.querySelector('.pk-ov')) return;\r\n\r\n    const S = {\r\n        path: [{ id: '', name: 'ğŸ  Home' }],\r\n        history: [],\r\n        forward: [],\r\n        items: [], display: [], sel: new Set(),\r\n        sort: 'name', dir: 1, scanning: false, dupMode: false, dupRunning: false,\r\n        dupReasons: new Map(),\r\n        dupGroups: new Map(),\r\n        dupSizeStrategy: 'small',\r\n        dupDateStrategy: 'old',\r\n        clipItems: [], clipType: '',\r\n        clipSourceParentId: null,\r\n        loading: false,\r\n        lastSelIdx: -1,\r\n        search: ''\r\n    };\r\n\r\n    const el = document.createElement('div'); el.className = 'pk-ov';\r\n    el.innerHTML = `\r\n        <style>${_style__WEBPACK_IMPORTED_MODULE_1__.CSS}</style>\r\n        <div class=\"pk-win pk-lang-${lang}\">\r\n            <div class=\"pk-loading-ov\" id=\"pk-loader\">\r\n                <div class=\"pk-spin-lg\"></div>\r\n                <div class=\"pk-loading-txt\" id=\"pk-load-txt\">${L.loading_detail}</div>\r\n                <button class=\"pk-stop-btn\" id=\"pk-stop-load\" title=\"${L.tip_stop}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.stop} <span>${L.btn_stop}</span></button>\r\n            </div>\r\n            <div class=\"pk-hd\">\r\n                <div class=\"pk-tt\">\r\n                    <img src=\"${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.logoUrl}\" style=\"width:24px;height:24px;border-radius:4px;object-fit:contain;\">\r\n                    ${L.title}\r\n                </div>\r\n                <div style=\"display:flex;gap:4px;\">\r\n                    <div class=\"pk-btn\" id=\"pk-help\" style=\"width:32px;padding:0;justify-content:center;\" title=\"${L.tip_help}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.help}</div>\r\n                    <div class=\"pk-btn\" id=\"pk-settings\" style=\"width:32px;padding:0;justify-content:center;\" title=\"${L.tip_settings}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.settings}</div>\r\n                    <div class=\"pk-btn\" id=\"pk-close\" style=\"width:32px;padding:0;justify-content:center;\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.close}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"pk-tb\">\r\n                <div class=\"pk-nav\" id=\"pk-crumb\"></div>\r\n                <div style=\"flex:1\"></div>\r\n                <div class=\"pk-search\">\r\n                    <input type=\"text\" id=\"pk-search-input\" placeholder=\"${L.placeholder_search}\" title=\"${L.tip_search}\" autocomplete=\"off\">\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\"></circle><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line></svg>\r\n                </div>\r\n                <div class=\"pk-dup-toolbar\" id=\"pk-dup-tools\">\r\n                    <span class=\"pk-dup-lbl\">${L.lbl_dup_tool}</span>\r\n                    <button class=\"pk-btn-toggle\" id=\"pk-dup-size\" title=\"${L.tip_toggle_size}\">\r\n                        ${L.btn_toggle_size} <span id=\"pk-cond-size\">(${L.cond_small})</span>\r\n                    </button>\r\n                    <button class=\"pk-btn-toggle\" id=\"pk-dup-date\" title=\"${L.tip_toggle_date}\">\r\n                        ${L.btn_toggle_date} <span id=\"pk-cond-date\">(${L.cond_old})</span>\r\n                    </button>\r\n                </div>\r\n                <button class=\"pk-btn\" id=\"pk-dup\" style=\"display:none\" title=\"${L.tip_dup}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.dup} <span>${L.btn_dup}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-scan\" title=\"${L.tip_scan}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.scan} <span>${L.btn_scan}</span></button>\r\n            </div>\r\n            <div class=\"pk-tb\" id=\"pk-actionbar\">\r\n                <button class=\"pk-btn\" id=\"pk-nav-back\" title=\"${L.tip_back}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.back}<span>${L.btn_back}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-refresh\" title=\"${L.tip_refresh}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.refresh}</button>\r\n                <button class=\"pk-btn\" id=\"pk-nav-fwd\" title=\"${L.tip_fwd}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.fwd}<span>${L.btn_fwd}</span></button>\r\n                <div class=\"pk-sep\"></div>\r\n                <button class=\"pk-btn\" id=\"pk-newfolder\" title=\"${L.tip_newfolder}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.newfolder} <span>${L.btn_newfolder}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-del\" title=\"${L.tip_del}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.del} <span>${L.btn_del}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-deselect\" title=\"${L.tip_deselect}\" style=\"display:none\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.deselect} <span>${L.btn_deselect}</span></button>\r\n                <div class=\"pk-sep\"></div>\r\n                <button class=\"pk-btn\" id=\"pk-copy\" title=\"${L.tip_copy}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.copy} <span>${L.btn_copy}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-cut\" title=\"${L.tip_cut}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.cut} <span>${L.btn_cut}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-paste\" title=\"${L.tip_paste}\" disabled>${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.paste} <span>${L.btn_paste}</span></button>\r\n                <div class=\"pk-sep\"></div>\r\n                <button class=\"pk-btn\" id=\"pk-rename\" title=\"${L.tip_rename}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.rename} <span>${L.btn_rename}</span></button>\r\n                <button class=\"pk-btn\" id=\"pk-bulkrename\" title=\"${L.tip_bulkrename}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.bulkrename} <span>${L.btn_bulkrename}</span></button>\r\n            </div>\r\n            <div class=\"pk-grid-hd\">\r\n                <div style=\"padding-left:4px\"><input type=\"checkbox\" id=\"pk-all\"></div>\r\n                <div class=\"pk-col\" data-k=\"name\">${L.col_name} <span></span></div>\r\n                <div class=\"pk-col\" data-k=\"size\">${L.col_size} <span></span></div>\r\n                <div class=\"pk-col\" data-k=\"duration\">${L.col_dur} <span></span></div>\r\n                <div class=\"pk-col\" data-k=\"modified_time\">${L.col_date} <span></span></div>\r\n            </div>\r\n            <div class=\"pk-vp\" id=\"pk-vp\">\r\n                <div class=\"pk-in\" id=\"pk-in\"></div>\r\n            </div>\r\n            <div class=\"pk-ft\">\r\n                <div class=\"pk-stat\" id=\"pk-stat\">${L.status_ready.replace('{n}', 0)}</div>\r\n                <div class=\"pk-grp\">\r\n                    <button class=\"pk-btn\" id=\"pk-ext\" title=\"${L.tip_ext}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.play} <span>${L.btn_ext}</span></button>\r\n                    <div class=\"pk-sep\"></div>\r\n                    <button class=\"pk-btn\" id=\"pk-idm\" title=\"${L.tip_idm}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.link} <span>${L.btn_idm}</span></button>\r\n                    <button class=\"pk-btn\" id=\"pk-aria2\" title=\"${L.tip_aria2}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.send} <span>${L.btn_aria2}</span></button>\r\n                    <button class=\"pk-btn\" id=\"pk-down\" title=\"${L.tip_down}\">${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.icons.download} <span>${L.btn_down}</span></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"pk-pop\" id=\"pk-pop\"></div>\r\n        <div class=\"pk-ctx\" id=\"pk-ctx\">\r\n            <div class=\"pk-ctx-item\" id=\"ctx-open\">ğŸ“‚ ${L.ctx_open}</div>\r\n            <div class=\"pk-ctx-sep\"></div>\r\n            <div class=\"pk-ctx-item\" id=\"ctx-down\">ğŸ’¾ ${L.ctx_down}</div>\r\n            <div class=\"pk-ctx-item\" id=\"ctx-copy\">ğŸ“„ ${L.ctx_copy}</div>\r\n            <div class=\"pk-ctx-item\" id=\"ctx-cut\">âœ‚ï¸ ${L.ctx_cut}</div>\r\n            <div class=\"pk-ctx-sep\"></div>\r\n            <div class=\"pk-ctx-item\" id=\"ctx-rename\">âœï¸ ${L.ctx_rename}</div>\r\n            <div class=\"pk-ctx-item\" id=\"ctx-del\" style=\"color:#d93025\">ğŸ—‘ï¸ ${L.ctx_del}</div>\r\n        </div>\r\n    `;\r\n    document.body.appendChild(el);\r\n\r\n    const UI = {\r\n        win: el.querySelector('.pk-win'), vp: el.querySelector('#pk-vp'), in: el.querySelector('#pk-in'),\r\n        loader: el.querySelector('#pk-loader'), loadTxt: el.querySelector('#pk-load-txt'), stopBtn: el.querySelector('#pk-stop-load'),\r\n        crumb: el.querySelector('#pk-crumb'), stat: el.querySelector('#pk-stat'),\r\n        chkAll: el.querySelector('#pk-all'), scan: el.querySelector('#pk-scan'), dup: el.querySelector('#pk-dup'),\r\n        dupTools: el.querySelector('#pk-dup-tools'),\r\n        btnDupSize: el.querySelector('#pk-dup-size'), condSize: el.querySelector('#pk-cond-size'),\r\n        btnDupDate: el.querySelector('#pk-dup-date'), condDate: el.querySelector('#pk-cond-date'),\r\n        btnBack: el.querySelector('#pk-nav-back'), btnFwd: el.querySelector('#pk-nav-fwd'),\r\n        btnCopy: el.querySelector('#pk-copy'), btnCut: el.querySelector('#pk-cut'),\r\n        btnDel: el.querySelector('#pk-del'), btnDeselect: el.querySelector('#pk-deselect'),\r\n        btnRename: el.querySelector('#pk-rename'), btnBulkRename: el.querySelector('#pk-bulkrename'), btnPaste: el.querySelector('#pk-paste'),\r\n        btnRefresh: el.querySelector('#pk-refresh'), btnNewFolder: el.querySelector('#pk-newfolder'),\r\n        btnSettings: el.querySelector('#pk-settings'), btnClose: el.querySelector('#pk-close'),\r\n        btnHelp: el.querySelector('#pk-help'),\r\n        btnExt: el.querySelector('#pk-ext'), btnIdm: el.querySelector('#pk-idm'),\r\n        pop: el.querySelector('#pk-pop'), ctx: el.querySelector('#pk-ctx'), cols: el.querySelectorAll('.pk-col'),\r\n        searchInput: el.querySelector('#pk-search-input')\r\n    };\r\n\r\n    function showModal(html) {\r\n        const m = document.createElement('div'); m.className = 'pk-modal-ov'; m.innerHTML = `<div class=\"pk-modal\">${html}</div>`; UI.win.appendChild(m); return m;\r\n    }\r\n\r\n    function setLoad(b) { S.loading = b; UI.loader.style.display = b ? 'flex' : 'none'; if (b) UI.loadTxt.textContent = L.loading_detail; }\r\n    function updateLoadTxt(txt) { if (UI.loadTxt) UI.loadTxt.innerText = txt; }\r\n    function updateNavState() {\r\n        UI.btnBack.disabled = (S.history.length === 0 && S.path.length <= 1);\r\n        UI.btnFwd.disabled = S.forward.length === 0;\r\n    }\r\n\r\n    async function load(isHistoryNav = false) {\r\n        if (S.loading) return;\r\n        setLoad(true);\r\n        S.search = ''; if (UI.searchInput) UI.searchInput.value = '';\r\n        const cur = S.path[S.path.length - 1];\r\n        updateNavState();\r\n        UI.scan.style.display = 'flex'; UI.dup.style.display = 'none'; UI.dupTools.style.display = 'none';\r\n        S.dupMode = false; S.lastSelIdx = -1;\r\n        renderCrumb();\r\n        try {\r\n            if (!S.scanning) {\r\n                updateLoadTxt(L.loading_detail);\r\n                S.items = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiList)(cur.id, 1000, (cnt) => { updateLoadTxt(L.loading_fetch.replace('{n}', cnt)); });\r\n                refresh();\r\n            }\r\n        } catch (e) { console.error(e); alert(\"Failed to load: \" + e.message); }\r\n        finally { setLoad(false); }\r\n        el.focus();\r\n    }\r\n\r\n    async function refresh() {\r\n        if (S.search) {\r\n            const q = S.search.toLowerCase();\r\n            S.display = S.items.filter(i => i.name.toLowerCase().includes(q));\r\n        } else {\r\n            S.display = [...S.items];\r\n        }\r\n\r\n        S.dupReasons.clear(); S.dupGroups.clear();\r\n\r\n        if (S.dupMode) {\r\n            setLoad(true); S.dupRunning = true; UI.stopBtn.onclick = () => { S.dupRunning = false; };\r\n            updateLoadTxt(L.loading_dup.replace('{p}', 0)); await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(50);\r\n            const videos = S.display.filter(i => i.mime_type && i.mime_type.startsWith('video'));\r\n            videos.sort((a, b) => a.name.length - b.name.length);\r\n            const clean = (name) => name.replace(/\\.[^/.]+$/, \"\").toLowerCase().trim();\r\n            const assigned = new Set(); const groups = []; const chunkSize = 50;\r\n\r\n            for (let i = 0; i < videos.length; i++) {\r\n                if (!S.dupRunning) break;\r\n                if (i % chunkSize === 0) { updateLoadTxt(L.loading_dup.replace('{p}', Math.round((i / videos.length) * 100))); await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(0); }\r\n                if (assigned.has(videos[i].id)) continue;\r\n                const root = videos[i]; const rootName = clean(root.name); const rootHash = root.gcid || root.md5_checksum || root.hash; const rootDur = parseFloat(root.params?.duration || 0);\r\n                const group = { items: [root], type: '' }; assigned.add(root.id);\r\n\r\n                for (let j = i + 1; j < videos.length; j++) {\r\n                    if (assigned.has(videos[j].id)) continue;\r\n                    const target = videos[j]; let isDup = false; let type = '';\r\n                    const targetHash = target.gcid || target.md5_checksum || target.hash;\r\n                    if (rootHash && targetHash && rootHash === targetHash && root.size === target.size) { isDup = true; type = L.tag_hash; }\r\n                    if (!isDup) {\r\n                        const targetName = clean(target.name);\r\n                        if (rootName === targetName) { isDup = true; type = L.tag_name; }\r\n                        else if (rootDur > 0) { if (Math.abs(rootDur - parseFloat(target.params?.duration || 0)) <= 1.0 && (targetName.includes(rootName) || rootName.includes(targetName))) { isDup = true; type = L.tag_sim; } }\r\n                    }\r\n                    if (isDup) { group.items.push(target); if (!group.type) group.type = type; assigned.add(target.id); S.dupReasons.set(target.id, type); }\r\n                }\r\n                if (group.items.length > 1) { groups.push(group.items.map(i => i.id)); if (!S.dupReasons.has(root.id)) S.dupReasons.set(root.id, group.type); }\r\n            }\r\n            const newDisplay = [];\r\n            groups.forEach((ids, gIdx) => {\r\n                ids.forEach(id => S.dupGroups.set(id, gIdx));\r\n                const firstId = ids[0]; const firstItem = S.items.find(x => x.id === firstId);\r\n                newDisplay.push({ id: `grp_${gIdx}`, isHeader: true, name: firstItem ? firstItem.name : `Group ${gIdx}`, count: ids.length, type: S.dupReasons.get(firstId) || \"Group\" });\r\n                ids.forEach(id => { const item = S.items.find(x => x.id === id); if (item) newDisplay.push(item); });\r\n            });\r\n            S.display = newDisplay; S.dupRunning = false; setLoad(false); UI.dupTools.style.display = 'flex';\r\n        } else {\r\n            UI.dupTools.style.display = 'none';\r\n            S.display.sort((a, b) => {\r\n                if (a.kind !== b.kind) return a.kind === 'drive#folder' ? -1 : 1;\r\n                let va = a[S.sort], vb = b[S.sort];\r\n                if (S.sort === 'size') { va = parseInt(va || 0); vb = parseInt(vb || 0); }\r\n                else if (S.sort === 'duration') { va = parseInt(a.params?.duration || 0); vb = parseInt(b.params?.duration || 0); }\r\n                if (va > vb) return S.dir; if (va < vb) return -S.dir; return 0;\r\n            });\r\n        }\r\n        const currentIds = new Set(S.display.filter(x => !x.isHeader).map(i => i.id));\r\n        for (let id of S.sel) { if (!currentIds.has(id)) S.sel.delete(id); }\r\n        if (S.sel.size === 0) UI.chkAll.checked = false;\r\n        renderList(); updateStat();\r\n    }\r\n\r\n    function renderList() {\r\n        UI.in.style.height = `${S.display.length * _config__WEBPACK_IMPORTED_MODULE_0__.CONF.rowHeight}px`;\r\n        UI.cols.forEach(c => { c.querySelector('span').textContent = (c.dataset.k === S.sort) ? (S.dir === 1 ? ' â–²' : ' â–¼') : ''; c.style.color = (c.dataset.k === S.sort) ? 'var(--pk-pri)' : ''; });\r\n        requestAnimationFrame(renderVisible);\r\n    }\r\n\r\n    function renderVisible() {\r\n        const top = UI.vp.scrollTop; const h = UI.vp.clientHeight;\r\n        const start = Math.max(0, Math.floor(top / _config__WEBPACK_IMPORTED_MODULE_0__.CONF.rowHeight) - _config__WEBPACK_IMPORTED_MODULE_0__.CONF.buffer);\r\n        const end = Math.min(S.display.length, Math.ceil((top + h) / _config__WEBPACK_IMPORTED_MODULE_0__.CONF.rowHeight) + _config__WEBPACK_IMPORTED_MODULE_0__.CONF.buffer);\r\n        UI.in.innerHTML = '';\r\n        for (let i = start; i < end; i++) {\r\n            const d = S.display[i]; if (!d) continue;\r\n            const row = document.createElement('div'); row.style.position = 'absolute'; row.style.top = `${i * _config__WEBPACK_IMPORTED_MODULE_0__.CONF.rowHeight}px`; row.style.width = '100%';\r\n            if (d.isHeader) {\r\n                row.className = 'pk-group-hd'; row.innerHTML = `<div style=\"display:flex; align-items:center; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;\"><span style=\"margin-right:8px;\">ğŸ“</span><span>${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(d.name)}</span></div><div style=\"margin-left:auto; display:flex; align-items:center;\"><span class=\"pk-tag\">${d.type}</span><span class=\"pk-cnt\">${d.count}</span></div>`;\r\n            } else {\r\n                const isSel = S.sel.has(d.id); row.className = `pk-row ${isSel ? 'sel' : ''}`;\r\n                row.innerHTML = `<div style=\"text-align:center\"><input type=\"checkbox\" ${isSel ? 'checked' : ''}></div><div class=\"pk-name\" title=\"${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(d.name)}\">${d.kind === 'drive#folder' ? 'ğŸ“' : 'ğŸ“„'} ${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(d.name)}</div><div>${d.kind === 'drive#folder' ? '' : (0,_utils__WEBPACK_IMPORTED_MODULE_3__.fmtSize)(d.size)}</div><div>${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fmtDur)(d.params?.duration || d.medias?.[0]?.duration)}</div><div style=\"color:#888\">${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.fmtDate)(d.modified_time)}</div>`;\r\n                const chk = row.querySelector('input');\r\n                row.onclick = (e) => { if (S.loading) return; if (e.shiftKey && S.lastSelIdx !== -1) { const startIdx = Math.min(S.lastSelIdx, i); const endIdx = Math.max(S.lastSelIdx, i); for (let k = startIdx; k <= endIdx; k++) { if (!S.display[k].isHeader) S.sel.add(S.display[k].id); } } else { if (e.target !== chk) chk.checked = !chk.checked; if (chk.checked) S.sel.add(d.id); else S.sel.delete(d.id); S.lastSelIdx = i; } renderList(); updateStat(); };\r\n                row.ondblclick = (e) => { e.preventDefault(); if (S.loading) return; if (d.kind === 'drive#folder') { S.history.push({ path: [...S.path] }); S.path.push({ id: d.id, name: d.name }); S.forward = []; load(); } else if (d.mime_type?.startsWith('video')) playVideo(d); };\r\n                row.oncontextmenu = (e) => { e.preventDefault(); if (!S.sel.has(d.id)) { S.sel.clear(); S.sel.add(d.id); S.lastSelIdx = i; renderList(); updateStat(); } UI.ctx.style.display = 'block'; let x = e.clientX; let y = e.clientY; const w = UI.ctx.offsetWidth || 150; const h = UI.ctx.offsetHeight || 200; if (x + w > window.innerWidth) x = window.innerWidth - w - 10; if (y + h > window.innerHeight) y = window.innerHeight - h - 10; UI.ctx.style.left = x + 'px'; UI.ctx.style.top = y + 'px'; };\r\n                row.onmouseenter = (e) => { if (d.thumbnail_link && !S.loading) { UI.pop.innerHTML = `<img src=\"${d.thumbnail_link}\">`; UI.pop.style.display = 'block'; const r = UI.pop.getBoundingClientRect(); let t = e.clientY + 15; if (t + r.height > window.innerHeight) t = e.clientY - r.height - 10; UI.pop.style.top = t + 'px'; UI.pop.style.left = (e.clientX + 15) + 'px'; } };\r\n                row.onmouseleave = () => UI.pop.style.display = 'none';\r\n            }\r\n            UI.in.appendChild(row);\r\n        }\r\n    }\r\n    UI.vp.onscroll = renderVisible;\r\n\r\n    function renderCrumb() {\r\n        UI.crumb.innerHTML = '';\r\n        S.path.forEach((p, i) => {\r\n            const s = document.createElement('span'); s.textContent = p.name; s.className = i === S.path.length - 1 ? 'act' : '';\r\n            s.onclick = () => { if (i !== S.path.length - 1 && !S.loading) { S.history.push({ path: [...S.path] }); S.forward = []; S.path = S.path.slice(0, i + 1); load(); } };\r\n            UI.crumb.appendChild(s); if (i < S.path.length - 1) UI.crumb.appendChild(document.createTextNode(' â€º '));\r\n        });\r\n    }\r\n\r\n    const goBack = () => {\r\n        if (S.loading) return;\r\n        if (S.history.length > 0) { S.forward.push([...S.path]); const prevState = S.history.pop(); S.path = prevState.path; load(true); return; }\r\n        if (S.path.length > 1) { S.forward.push([...S.path]); S.path = S.path.slice(0, S.path.length - 1); load(true); return; }\r\n        if (S.path.length === 1 && S.history.length === 0) { if (confirm(L.msg_exit_confirm)) { el.remove(); } }\r\n    };\r\n    const goForward = () => { if (S.forward.length > 0 && !S.loading) { S.history.push({ path: [...S.path] }); const nextPath = S.forward.pop(); S.path = nextPath; load(); } };\r\n\r\n    el.tabIndex = 0; el.focus();\r\n    const keyHandler = (e) => {\r\n        if (!document.querySelector('.pk-ov')) return;\r\n        if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;\r\n        if (e.key === 'Escape') { const player = document.getElementById('pk-player-ov'); if (player) { player.remove(); return; } const openModal = document.querySelector('.pk-modal-ov'); if (openModal) { openModal.remove(); return; } if (UI.ctx.style.display === 'block') UI.ctx.style.display = 'none'; else if (S.sel.size > 0) { S.sel.clear(); refresh(); } else if (S.path.length === 1) el.remove(); return; }\r\n        if (e.key === 'F2') { e.preventDefault(); if (S.sel.size === 1) UI.btnRename.click(); else if (S.sel.size > 1) UI.btnBulkRename.click(); }\r\n        if (e.key === 'F5') { e.preventDefault(); UI.btnRefresh.click(); }\r\n        if (e.key === 'F8') { e.preventDefault(); UI.btnNewFolder.click(); }\r\n        if (e.key === 'Delete') { UI.btnDel.click(); }\r\n        if (e.key === 'Backspace') { e.preventDefault(); if (e.shiftKey) { if (!S.scanning) goForward(); } else { if (!S.scanning) goBack(); } return; }\r\n        if (e.altKey && e.key === 'ArrowLeft') { e.preventDefault(); goBack(); return; }\r\n        if (e.altKey && e.key === 'ArrowRight') { e.preventDefault(); goForward(); return; }\r\n        if (e.ctrlKey || e.metaKey) { if (e.key === 'a' || e.key === 'A') { e.preventDefault(); UI.chkAll.click(); } if (e.key === 'c' || e.key === 'C') { e.preventDefault(); UI.btnCopy.click(); } if (e.key === 'x' || e.key === 'X') { e.preventDefault(); UI.btnCut.click(); } if (e.key === 'v' || e.key === 'V') { e.preventDefault(); UI.btnPaste.click(); } }\r\n        if (e.altKey) { if (e.key === 's' || e.key === 'S') { e.preventDefault(); UI.btnSettings.click(); } }\r\n    };\r\n    document.addEventListener('keydown', keyHandler);\r\n    const mouseHandler = (e) => { if (!document.querySelector('.pk-ov')) return; if (e.button === 3) { e.preventDefault(); e.stopPropagation(); goBack(); } if (e.button === 4) { e.preventDefault(); e.stopPropagation(); goForward(); } if (UI.ctx.style.display === 'block' && !UI.ctx.contains(e.target)) UI.ctx.style.display = 'none'; };\r\n    document.addEventListener('mouseup', mouseHandler);\r\n\r\n    function updateStat() {\r\n        const n = S.sel.size; UI.stat.textContent = n > 0 ? L.sel_count.replace('{n}', n) : L.status_ready.replace('{n}', S.display.length); const hasSel = n > 0;\r\n        UI.btnCopy.disabled = !hasSel; UI.btnCut.disabled = !hasSel; UI.btnDel.disabled = !hasSel; UI.btnRename.disabled = n !== 1; UI.btnBulkRename.disabled = n < 2; UI.btnSettings.disabled = false; UI.btnDeselect.style.display = hasSel ? 'inline-flex' : 'none';\r\n    }\r\n\r\n    async function getLinks() { const res = []; for (const id of S.sel) { let item = S.items.find(x => x.id === id); if (item && !item.web_content_link) { try { item = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiGet)(id); } catch { } } if (item?.web_content_link) res.push(item); } return res; }\r\n    async function playVideo(item) {\r\n        let link = item.web_content_link; if (!link) { try { const m = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiGet)(item.id); link = m.web_content_link; } catch (e) { console.error(e); } }\r\n        if (!link) { alert(L.msg_video_fail || \"Cannot fetch video link.\"); return; }\r\n        const d = document.createElement('div'); d.id = 'pk-player-ov'; d.tabIndex = 0;\r\n        d.innerHTML = `<div style=\"position:fixed;inset:0;z-index:2147483647;background:rgba(0,0,0,0.95);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;\"><div style=\"width:95vw;height:95vh;max-width:1600px;background:#000;border-radius:8px;box-shadow:0 20px 60px rgba(0,0,0,0.8);display:flex;flex-direction:column;overflow:hidden;border:1px solid #333;\"><div style=\"flex:0 0 40px;background:#1a1a1a;padding:0 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #333;\"><span style=\"color:#ddd;font-weight:600;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\">${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(item.name)}</span><button class=\"pk-close-btn\" style=\"color:#aaa;background:none;border:none;font-size:24px;cursor:pointer;width:30px;height:30px;display:flex;align-items:center;justify-content:center;\">Ã—</button></div><div style=\"flex:1;background:#000;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;\"><video src=\"${link}\" controls autoplay playsinline preload=\"auto\" style=\"width:100%;height:100%;object-fit:contain;outline:none;\" onerror=\"alert('Video Load Failed. Link might be restricted.');\"></video></div></div><style>.pk-close-btn:hover{color:#fff}</style></div>`;\r\n        document.body.appendChild(d); d.focus(); d.onkeydown = (e) => { if (e.key === 'Escape') { d.remove(); e.stopPropagation(); } }; d.querySelector('.pk-close-btn').onclick = () => d.remove(); d.onclick = (e) => { if (e.target === d.firstElementChild) d.remove(); };\r\n    }\r\n\r\n    // Handlers\r\n    if (UI.searchInput) {\r\n        UI.searchInput.oninput = (e) => { S.search = e.target.value.trim(); refresh(); };\r\n        UI.searchInput.onkeydown = (e) => { e.stopPropagation(); };\r\n    }\r\n\r\n    UI.btnHelp.onclick = () => {\r\n        const m = showModal(`\r\n            <h3 style=\"margin-top:0;\">${L.modal_help_title}</h3>\r\n            ${L.help_desc}\r\n            <div class=\"pk-modal-act\" style=\"margin-top:20px;\">\r\n                <button class=\"pk-btn pri\" id=\"help_close\" style=\"width:100%; justify-content:center; height:40px;\">ë‹«ê¸°</button>\r\n            </div>\r\n        `);\r\n        m.querySelector('#help_close').onclick = () => m.remove();\r\n    };\r\n\r\n    UI.scan.onclick = async () => { if (S.scanning) { S.scanning = false; return; } if (!confirm(L.msg_flatten_warn)) return; S.scanning = true; UI.stopBtn.onclick = () => { S.scanning = false; }; const root = S.path[S.path.length - 1]; let q = [{ id: root.id, name: root.name }]; let all = []; setLoad(true); try { while (q.length && S.scanning) { const curr = q.shift(); const pid = curr.id; updateLoadTxt(L.status_scanning.replace('{n}', all.length).replace('{f}', curr.name) + \"\\n\" + L.loading_detail); const files = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiList)(pid, 500, (currentCount) => { updateLoadTxt(L.status_scanning.replace('{n}', all.length + currentCount).replace('{f}', curr.name)); }); for (const f of files) { if (f.kind === 'drive#folder') q.push({ id: f.id, name: f.name }); else all.push(f); } await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(20); } if (S.scanning) { S.items = all; UI.dup.style.display = 'flex'; refresh(); } } catch (e) { alert(\"Error: \" + e.message); } finally { S.scanning = false; setLoad(false); updateStat(); } };\r\n    UI.dup.onclick = () => { if (!S.dupMode) if (!confirm(L.msg_dup_warn)) return; S.dupMode = !S.dupMode; UI.dup.style.backgroundColor = S.dupMode ? '#444' : ''; UI.dup.style.color = S.dupMode ? '#fff' : ''; UI.dup.style.borderColor = S.dupMode ? '#666' : ''; refresh(); };\r\n    UI.btnDupSize.onclick = () => { S.dupSizeStrategy = S.dupSizeStrategy === 'small' ? 'large' : 'small'; UI.condSize.textContent = `(${S.dupSizeStrategy === 'small' ? L.cond_small : L.cond_large})`; S.sel.clear(); const itemMap = new Map(); S.display.forEach(d => { if (d.isHeader) return; const gIdx = S.dupGroups.get(d.id); if (gIdx !== undefined) { if (!itemMap.has(gIdx)) itemMap.set(gIdx, []); itemMap.get(gIdx).push(d); } }); itemMap.forEach(items => { if (items.length < 2) return; let keep = (S.dupSizeStrategy === 'small') ? items.reduce((a, b) => parseInt(a.size) > parseInt(b.size) ? a : b) : items.reduce((a, b) => parseInt(a.size) < parseInt(b.size) ? a : b); items.forEach(i => { if (i.id !== keep.id) S.sel.add(i.id); }); }); renderList(); updateStat(); };\r\n    UI.btnDupDate.onclick = () => { S.dupDateStrategy = S.dupDateStrategy === 'old' ? 'new' : 'old'; UI.condDate.textContent = `(${S.dupDateStrategy === 'old' ? L.cond_old : L.cond_new})`; S.sel.clear(); const itemMap = new Map(); S.display.forEach(d => { if (d.isHeader) return; const gIdx = S.dupGroups.get(d.id); if (gIdx !== undefined) { if (!itemMap.has(gIdx)) itemMap.set(gIdx, []); itemMap.get(gIdx).push(d); } }); itemMap.forEach(items => { if (items.length < 2) return; let keep = (S.dupDateStrategy === 'old') ? items.reduce((a, b) => new Date(a.modified_time) > new Date(b.modified_time) ? a : b) : items.reduce((a, b) => new Date(a.modified_time) < new Date(b.modified_time) ? a : b); items.forEach(i => { if (i.id !== keep.id) S.sel.add(i.id); }); }); renderList(); updateStat(); };\r\n    UI.cols.forEach(c => c.onclick = () => { const k = c.dataset.k; if (S.sort === k) S.dir *= -1; else { S.sort = k; S.dir = 1; } refresh(); });\r\n    UI.chkAll.onclick = (e) => { if (e.target.checked) S.display.forEach(i => S.sel.add(i.id)); else S.sel.clear(); renderList(); updateStat(); };\r\n    UI.btnBack.onclick = goBack; UI.btnFwd.onclick = goForward; UI.btnRefresh.onclick = () => load();\r\n    UI.btnNewFolder.onclick = async () => { const name = prompt(L.msg_newfolder_prompt, ''); if (!name) return; const cur = S.path[S.path.length - 1]; try { await fetch('https://api-drive.mypikpak.com/drive/v1/files', { method: 'POST', headers: (0,_api__WEBPACK_IMPORTED_MODULE_4__.getHeaders)(), body: JSON.stringify({ kind: 'drive#folder', parent_id: cur.id || '', name: name }) }); load(); } catch (e) { alert('Error: ' + e.message); } };\r\n    UI.btnCopy.onclick = () => { if (S.sel.size === 0) return; S.clipItems = Array.from(S.sel); S.clipType = 'copy'; S.clipSourceParentId = S.path[S.path.length - 1].id || ''; UI.btnPaste.disabled = false; alert(L.msg_copy_done); };\r\n    UI.btnCut.onclick = () => { if (S.sel.size === 0) return; S.clipItems = Array.from(S.sel); S.clipType = 'move'; S.clipSourceParentId = S.path[S.path.length - 1].id || ''; UI.btnPaste.disabled = false; alert(L.msg_cut_done); };\r\n    UI.btnPaste.onclick = async () => { if (!S.clipItems || S.clipItems.length === 0) { alert(L.msg_paste_empty); return; } setLoad(true); const dest = S.path[S.path.length - 1].id || ''; if (S.clipSourceParentId === dest) { alert(L.msg_paste_same_folder); setLoad(false); return; } const ids = S.clipItems.slice(); const endpoint = S.clipType === 'move' ? 'https://api-drive.mypikpak.com/drive/v1/files:batchMove' : 'https://api-drive.mypikpak.com/drive/v1/files:batchCopy'; try { await fetch(endpoint, { method: 'POST', headers: (0,_api__WEBPACK_IMPORTED_MODULE_4__.getHeaders)(), body: JSON.stringify({ ids: ids, to: { parent_id: dest } }) }); S.clipItems = []; S.clipType = ''; UI.btnPaste.disabled = true; await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(500); setLoad(false); await load(); } catch (e) { alert('Paste error: ' + e.message); setLoad(false); } };\r\n    UI.btnRename.onclick = async () => { if (S.sel.size !== 1) return; const id = Array.from(S.sel)[0]; const item = S.items.find(i => i.id === id); if (!item) return; const m = showModal(`<h3>${L.modal_rename_title}</h3><div class=\"pk-field\"><input type=\"text\" id=\"rn_new_name\" value=\"${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(item.name)}\"></div><div class=\"pk-modal-act\"><button class=\"pk-btn\" id=\"rn_cancel\">${L.btn_cancel}</button><button class=\"pk-btn pri\" id=\"rn_confirm\">${L.btn_confirm}</button></div>`); const inp = m.querySelector('#rn_new_name'); inp.focus(); if (item.kind !== 'drive#folder' && item.name.lastIndexOf('.') > 0) inp.setSelectionRange(0, item.name.lastIndexOf('.')); else inp.select(); const doRename = async () => { const newName = inp.value.trim(); if (!newName || newName === item.name) { m.remove(); return; } if (S.items.some(i => i.name === newName)) { alert(L.msg_name_exists.replace('{n}', newName)); return; } m.remove(); try { setLoad(true); await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiAction)(`/${id}`, { name: newName }); await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(200); setLoad(false); load(); } catch (e) { alert(\"Error: \" + e.message); setLoad(false); } }; m.querySelector('#rn_cancel').onclick = () => m.remove(); m.querySelector('#rn_confirm').onclick = doRename; inp.onkeydown = (e) => { if (e.key === 'Enter') doRename(); if (e.key === 'Escape') { m.remove(); e.stopPropagation(); } }; };\r\n    UI.btnBulkRename.onclick = () => { if (S.sel.size < 2) return; const m = showModal(`<h3>${L.modal_rename_multi_title}</h3><div class=\"pk-field\"><label><input type=\"radio\" name=\"rn_mode\" value=\"pattern\" checked> ${L.label_pattern}</label><input type=\"text\" id=\"rn_pattern\" value=\"Video {n}\" placeholder=\"Video {n}\"></div><div class=\"pk-field\" style=\"margin-top:10px\"><label><input type=\"radio\" name=\"rn_mode\" value=\"replace\"> ${L.label_replace} <span style=\"font-size:11px;color:#888\">${L.label_replace_note}</span></label><input type=\"text\" id=\"rn_find\" placeholder=\"${L.placeholder_find}\" disabled><input type=\"text\" id=\"rn_rep\" placeholder=\"${L.placeholder_replace}\" disabled></div><div class=\"pk-modal-act\"><button class=\"pk-btn\" id=\"rn_cancel\">${L.btn_cancel}</button><button class=\"pk-btn pri\" id=\"rn_preview\">${L.btn_preview}</button></div>`); const radios = m.querySelectorAll('input[name=\"rn_mode\"]'); const inpPattern = m.querySelector('#rn_pattern'); const inpFind = m.querySelector('#rn_find'); const inpRep = m.querySelector('#rn_rep'); radios.forEach(r => r.onchange = () => { const isPat = r.value === 'pattern'; inpPattern.disabled = !isPat; inpFind.disabled = isPat; inpRep.disabled = isPat; }); m.querySelector('#rn_cancel').onclick = () => m.remove(); m.querySelector('#rn_preview').onclick = () => { const mode = m.querySelector('input[name=\"rn_mode\"]:checked').value; const pattern = inpPattern.value; const findStr = inpFind.value; const repStr = inpRep.value || ''; let idx = 1; const changes = []; const existingNames = new Set(S.items.map(i => i.name)); for (const id of S.sel) { const item = S.items.find(x => x.id === id); if (!item) continue; let base = item.name; let ext = \"\"; if (item.kind !== 'drive#folder' && item.name.lastIndexOf('.') > 0) { base = item.name.substring(0, item.name.lastIndexOf('.')); ext = item.name.substring(item.name.lastIndexOf('.')); } let newBase = base; if (mode === 'pattern') { if (pattern) newBase = pattern.replace(/\\{n\\}/g, idx++); } else { if (findStr && base.includes(findStr)) newBase = base.split(findStr).join(repStr); } const finalName = newBase + ext; if (finalName !== item.name) { if (existingNames.has(finalName)) { alert(L.msg_name_exists.replace('{n}', finalName)); return; } changes.push({ id: item.id, old: item.name, new: finalName }); } } m.remove(); if (changes.length === 0) { alert(\"No changes detected.\"); return; } let rowsHtml = changes.map(c => `<div class=\"pk-prev-row\"><div style=\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap\">${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(c.old)}</div><div style=\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--pk-pri)\">${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(c.new)}</div></div>`).join(''); const p = showModal(`<h3>${L.modal_preview_title} (${changes.length})</h3><div class=\"pk-prev-list\"><div class=\"pk-prev-row\" style=\"font-weight:bold;background:#eee\"><div>${L.col_old}</div><div>${L.col_new}</div></div>${rowsHtml}</div><div class=\"pk-modal-act\"><button class=\"pk-btn\" id=\"pr_cancel\">${L.btn_cancel}</button><button class=\"pk-btn pri\" id=\"pr_confirm\">${L.btn_confirm}</button></div>`); p.querySelector('#pr_cancel').onclick = () => p.remove(); p.querySelector('#pr_confirm').onclick = async () => { setLoad(true); let count = 0; try { for (const c of changes) { await (0,_api__WEBPACK_IMPORTED_MODULE_4__.apiAction)(`/${c.id}`, { name: c.new }); count++; await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(50); } alert(L.msg_bulkrename_done.replace('{n}', count)); load(); } catch (e) { alert(\"Rename Error: \" + e.message); } finally { setLoad(false); p.remove(); } }; }; };\r\n    UI.btnExt.onclick = async () => { const player = GM_getValue('pk_ext_player', 'system'); const files = await getLinks(); if (!files || files.length === 0) { alert(L.msg_download_fail); return; } if (S.sel.size > 1) { let m3u = '#EXTM3U\\n'; files.forEach(f => { m3u += `#EXTINF:-1,${f.name}\\n${f.web_content_link}\\n`; }); const blob = new Blob([m3u], { type: 'audio/x-mpegurl' }); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `pikpak_playlist_${Date.now()}.m3u`; a.click(); alert(L.msg_batch_m3u); } else { const f = files[0]; if (player === 'system') window.open(f.web_content_link, '_blank'); else window.open((player === 'potplayer' ? 'potplayer://' : 'vlc://') + f.web_content_link, '_self'); } };\r\n    UI.btnIdm.onclick = async () => { const files = await getLinks(); if (!files || files.length === 0) { alert(L.msg_download_fail); return; } if (S.sel.size > 1) { let ef2 = ''; files.forEach(f => { ef2 += `<\\r\\n${f.web_content_link}\\r\\nfilename=${f.name}\\r\\n>\\r\\n`; }); const blob = new Blob([ef2], { type: 'text/plain' }); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `pikpak_idm_${Date.now()}.ef2`; a.click(); alert(L.msg_batch_ef2); } else { window.open(files[0].web_content_link, '_blank'); } };\r\n    UI.win.querySelector('#pk-down').onclick = async () => { const files = await getLinks(); if (!files || files.length === 0) { alert(L.msg_download_fail); return; } for (const f of files) { const a = document.createElement('a'); a.href = f.web_content_link; document.body.appendChild(a); a.click(); a.remove(); await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(200); } };\r\n    UI.win.querySelector('#pk-aria2').onclick = async () => { const files = await getLinks(); if (!files.length) { alert(L.msg_download_fail); return; } const ariaUrl = GM_getValue('pk_aria2_url', 'ws://localhost:6800/jsonrpc'); const ariaToken = GM_getValue('pk_aria2_token', ''); const payload = files.map(f => ({ jsonrpc: '2.0', method: 'aria2.addUri', id: f.id, params: [`token:${ariaToken}`, [f.web_content_link], { out: f.name }] })); try { await fetch(ariaUrl, { method: 'POST', body: JSON.stringify(payload), headers: { 'Content-Type': 'application/json' } }); alert(`Sent ${files.length} to Aria2`); } catch (e) { alert('Aria2 Error. Check Settings.'); } };\r\n    UI.btnDel.onclick = async () => { if (!S.sel.size) return; if (confirm(L.warn_del.replace('{n}', S.sel.size))) { await fetch(`https://api-drive.mypikpak.com/drive/v1/files:batchTrash`, { method: 'POST', headers: (0,_api__WEBPACK_IMPORTED_MODULE_4__.getHeaders)(), body: JSON.stringify({ ids: Array.from(S.sel) }) }); await (0,_utils__WEBPACK_IMPORTED_MODULE_3__.sleep)(500); if (!S.scanning) load(); else { S.items = S.items.filter(i => !S.sel.has(i.id)); refresh(); } } };\r\n    UI.btnDeselect.onclick = () => { S.sel.clear(); refresh(); };\r\n    UI.btnSettings.onclick = () => { const curLang = GM_getValue('pk_lang', lang); const curPlayer = GM_getValue('pk_ext_player', 'system'); const curAriaUrl = GM_getValue('pk_aria2_url', 'ws://localhost:6800/jsonrpc'); const curAriaToken = GM_getValue('pk_aria2_token', ''); const m = showModal(`<h3>${L.modal_settings_title}</h3><div class=\"pk-field\"><label>${L.label_lang}</label><select id=\"set_lang\"><option value=\"ko\" ${curLang === 'ko' ? 'selected' : ''}>í•œêµ­ì–´</option><option value=\"en\" ${curLang === 'en' ? 'selected' : ''}>English</option><option value=\"ja\" ${curLang === 'ja' ? 'selected' : ''}>æ—¥æœ¬èª</option><option value=\"zh\" ${curLang === 'zh' ? 'selected' : ''}>ä¸­æ–‡ (ç®€ä½“)</option></select></div><div class=\"pk-field\"><label>${L.label_player}</label><select id=\"set_player\"><option value=\"system\" ${curPlayer === 'system' ? 'selected' : ''}>System Default</option><option value=\"potplayer\" ${curPlayer === 'potplayer' ? 'selected' : ''}>PotPlayer</option><option value=\"vlc\" ${curPlayer === 'vlc' ? 'selected' : ''}>VLC Player</option></select></div><div class=\"pk-field\"><label>${L.label_aria2_url}</label><input type=\"text\" id=\"set_aria_url\" value=\"${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(curAriaUrl)}\"></div><div class=\"pk-field\"><label>${L.label_aria2_token}</label><input type=\"text\" id=\"set_aria_token\" value=\"${(0,_utils__WEBPACK_IMPORTED_MODULE_3__.esc)(curAriaToken)}\"></div><div class=\"pk-modal-act\"><button class=\"pk-btn\" id=\"set_cancel\">${L.btn_cancel}</button><button class=\"pk-btn pri\" id=\"set_save\">${L.btn_save}</button></div><div class=\"pk-credit\"><b>ì œì‘: ë¸Œëœë‰´(poihoii)</b><br><a href=\"https://github.com/poihoii/PikPak_FileManager\" target=\"_blank\">https://github.com/poihoii/PikPak_FileManager</a></div>`); m.querySelector('#set_cancel').onclick = () => m.remove(); m.querySelector('#set_save').onclick = () => { GM_setValue('pk_lang', m.querySelector('#set_lang').value); GM_setValue('pk_ext_player', m.querySelector('#set_player').value); GM_setValue('pk_aria2_url', m.querySelector('#set_aria_url').value); GM_setValue('pk_aria2_token', m.querySelector('#set_aria_token').value); alert(L.msg_settings_saved); location.reload(); }; };\r\n\r\n    const ctx = el.querySelector('#pk-ctx');\r\n    ctx.querySelector('#ctx-open').onclick = () => { ctx.style.display = 'none'; const id = Array.from(S.sel)[0]; const item = S.items.find(i => i.id === id); if (item) { if (item.kind === 'drive#folder') { S.history.push({ path: [...S.path] }); S.path.push({ id: item.id, name: item.name }); S.forward = []; load(); } else if (item.mime_type?.startsWith('video')) playVideo(item); } };\r\n    ctx.querySelector('#ctx-down').onclick = () => { ctx.style.display = 'none'; UI.win.querySelector('#pk-down').click(); };\r\n    ctx.querySelector('#ctx-copy').onclick = () => { ctx.style.display = 'none'; UI.btnCopy.click(); };\r\n    ctx.querySelector('#ctx-cut').onclick = () => { ctx.style.display = 'none'; UI.btnCut.click(); };\r\n    ctx.querySelector('#ctx-rename').onclick = () => { ctx.style.display = 'none'; UI.btnRename.click(); };\r\n    ctx.querySelector('#ctx-del').onclick = () => { ctx.style.display = 'none'; UI.btnDel.click(); };\r\n    UI.btnClose.addEventListener('click', () => { el.remove(); document.removeEventListener('keydown', keyHandler); document.removeEventListener('mouseup', mouseHandler); });\r\n\r\n    updateStat();\r\n    load();\r\n}\r\n\r\nfunction tryInject() {\r\n    console.log(\"ğŸš€ PikPak Script: Attempting inject...\");\r\n    if (document.getElementById('pk-launch')) {\r\n        console.log(\"ğŸš€ PikPak Script: Already injected.\");\r\n        return;\r\n    }\r\n    if (!document.body) {\r\n        console.log(\"ğŸš€ PikPak Script: Body not ready, retrying...\");\r\n        setTimeout(tryInject, 500);\r\n        return;\r\n    }\r\n    inject();\r\n    console.log(\"ğŸš€ PikPak Script: INJECT SUCCESS!\");\r\n}\r\n\r\nfunction inject() {\r\n    if (document.getElementById('pk-launch')) return;\r\n    const b = document.createElement('button'); b.id = 'pk-launch';\r\n    b.style.cssText = `position:fixed;bottom:20px;right:20px;width:50px;height:50px;border-radius:50%;background:#1a5eff;border:none;cursor:pointer;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,0.3);padding:0;overflow:hidden;transition:transform 0.1s;`;\r\n    b.innerHTML = `<img src=\"${_config__WEBPACK_IMPORTED_MODULE_0__.CONF.logoUrl}\" style=\"width:100%;height:100%;display:block;border-radius:50%;\">`;\r\n\r\n    const savedLeft = GM_getValue('pk_pos_left', null);\r\n    const savedTop = GM_getValue('pk_pos_top', null);\r\n\r\n    if (savedLeft !== null && savedTop !== null) {\r\n        b.style.bottom = 'auto';\r\n        b.style.right = 'auto';\r\n        b.style.left = savedLeft;\r\n        b.style.top = savedTop;\r\n    }\r\n\r\n    let isDragging = false;\r\n    let dragStartX, dragStartY;\r\n\r\n    b.onmousedown = (e) => {\r\n        isDragging = false;\r\n        dragStartX = e.clientX;\r\n        dragStartY = e.clientY;\r\n        const rect = b.getBoundingClientRect();\r\n        b.style.bottom = 'auto'; b.style.right = 'auto';\r\n        b.style.left = rect.left + 'px'; b.style.top = rect.top + 'px';\r\n        b.style.transition = 'none';\r\n        const offsetX = e.clientX - rect.left;\r\n        const offsetY = e.clientY - rect.top;\r\n\r\n        const onMove = (em) => {\r\n            if (!isDragging && (Math.abs(em.clientX - dragStartX) > 3 || Math.abs(em.clientY - dragStartY) > 3)) {\r\n                isDragging = true;\r\n            }\r\n            if (isDragging) {\r\n                b.style.left = (em.clientX - offsetX) + 'px';\r\n                b.style.top = (em.clientY - offsetY) + 'px';\r\n            }\r\n        };\r\n\r\n        const onUp = () => {\r\n            document.removeEventListener('mousemove', onMove);\r\n            document.removeEventListener('mouseup', onUp);\r\n            b.style.transition = 'transform 0.1s';\r\n            if (!isDragging) {\r\n                openManager();\r\n            } else {\r\n                GM_setValue('pk_pos_left', b.style.left);\r\n                GM_setValue('pk_pos_top', b.style.top);\r\n            }\r\n        };\r\n        document.addEventListener('mousemove', onMove);\r\n        document.addEventListener('mouseup', onUp);\r\n    };\r\n\r\n    document.body.appendChild(b);\r\n    console.log(\"ğŸš€ Button Created!\");\r\n}\r\n\r\ntryInject();\r\nwindow.addEventListener('load', tryInject);\r\nconst obs = new MutationObserver(() => {\r\n    if (!document.getElementById('pk-launch')) {\r\n        tryInject();\r\n    }\r\n});\r\nobs.observe(document.body, { childList: true, subtree: true });\n\n//# sourceURL=webpack://PikPak-FileManager/./src/main.js?\n}");

/***/ }),

/***/ "./src/style.js":
/*!**********************!*\
  !*** ./src/style.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CSS: () => (/* binding */ CSS)\n/* harmony export */ });\nconst CSS = `\r\n    :root { --pk-bg: #ffffff; --pk-fg: #1a1a1a; --pk-bd: #e5e5e5; --pk-hl: #f0f0f0; --pk-sel-bg: #e6f3ff; --pk-sel-bd: #cce8ff; --pk-pri: #0067c0; --pk-btn-hov: #e0e0e0; --pk-gh: #f5f5f5; --pk-gh-fg: #333; }\r\n    @media (prefers-color-scheme: dark) { :root { --pk-bg: #202020; --pk-fg: #f5f5f5; --pk-bd: #333333; --pk-hl: #2d2d2d; --pk-sel-bg: #2b3a4a; --pk-sel-bd: #0067c0; --pk-pri: #4cc2ff; --pk-btn-hov: #3a3a3a; --pk-gh: #2a2a2a; --pk-gh-fg: #eee; } }\r\n    .pk-ov { position: fixed; inset: 0; z-index: 10000; background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; font-family: \"Segoe UI Variable\", \"Segoe UI\", sans-serif; outline: none; }\r\n    .pk-win { width: 70vw; max-width: 1600px; min-width: 800px; height: 80vh; background: var(--pk-bg); color: var(--pk-fg); border-radius: 8px; box-shadow: 0 25px 50px rgba(0,0,0,0.25); display: flex; flex-direction: column; overflow: hidden; border: 1px solid var(--pk-bd); }\r\n    .pk-hd { height: 48px; border-bottom: 1px solid var(--pk-bd); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; background: var(--pk-bg); }\r\n    .pk-tt { font-weight: 700; font-size: 20px; display: flex; align-items: center; gap: 10px; }\r\n    .pk-tb { padding: 8px 16px; border-bottom: 1px solid var(--pk-bd); display: flex; gap: 8px; align-items: center; background: var(--pk-bg); height: 40px; }\r\n\r\n    .pk-btn { height: 32px; padding: 0 12px; border-radius: 4px; border: 1px solid transparent; background: transparent; color: var(--pk-fg); cursor: pointer; font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 6px; transition: background 0.1s; position: relative; font-weight: 500; white-space: nowrap; flex-shrink: 0; }\r\n    .pk-btn:hover:not(:disabled) { background: var(--pk-btn-hov); }\r\n    /* pointer-events: none ì œê±° ë° cursor ë³€ê²½ìœ¼ë¡œ íˆ´íŒ í‘œì‹œ ê°€ëŠ¥í•˜ê²Œ í•¨ */\r\n    .pk-btn:disabled { opacity: 0.4; cursor: not-allowed; }\r\n    .pk-btn.pri { color: var(--pk-pri); font-weight: 600; }\r\n    .pk-btn svg { width: 16px; height: 16px; flex-shrink: 0; display: block; vertical-align: middle; }\r\n    .pk-btn span { white-space: nowrap; transition: opacity 0.2s; }\r\n\r\n    /* [ìˆœì°¨ì  ë°˜ì‘í˜•] ê·¸ë£¹ë³„ë¡œ ë‹¨ê³„ì ìœ¼ë¡œ ì•„ì´ì½˜ ëª¨ë“œ ì „í™˜ */\r\n    \r\n    /* 1ë‹¨ê³„: ê°€ì¥ ì˜¤ë¥¸ìª½ 'ì´ë¦„ ë³€ê²½' ê·¸ë£¹ (Rename Group) */\r\n    @media (max-width: 1390px) {\r\n        .pk-lang-ko #pk-rename span, .pk-lang-ko #pk-bulkrename span { display: none; }\r\n        .pk-lang-ko #pk-rename, .pk-lang-ko #pk-bulkrename { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1430px) {\r\n        .pk-lang-en #pk-rename span, .pk-lang-en #pk-bulkrename span { display: none; }\r\n        .pk-lang-en #pk-rename, .pk-lang-en #pk-bulkrename { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1480px) {\r\n        .pk-lang-ja #pk-rename span, .pk-lang-ja #pk-bulkrename span { display: none; }\r\n        .pk-lang-ja #pk-rename, .pk-lang-ja #pk-bulkrename { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1370px) {\r\n        .pk-lang-zh #pk-rename span, .pk-lang-zh #pk-bulkrename span { display: none; }\r\n        .pk-lang-zh #pk-rename, .pk-lang-zh #pk-bulkrename { padding: 0 8px; }\r\n    }\r\n\r\n    /* 2ë‹¨ê³„: 'í´ë¦½ë³´ë“œ' ê·¸ë£¹ (Clipboard Group - ë³µì‚¬/ì´ë™/ë¶™ì—¬ë„£ê¸°) */\r\n    @media (max-width: 1270px) {\r\n        .pk-lang-ko #pk-copy span, .pk-lang-ko #pk-cut span, .pk-lang-ko #pk-paste span { display: none; }\r\n        .pk-lang-ko #pk-copy, .pk-lang-ko #pk-cut, .pk-lang-ko #pk-paste { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1310px) {\r\n        .pk-lang-en #pk-copy span, .pk-lang-en #pk-cut span, .pk-lang-en #pk-paste span { display: none; }\r\n        .pk-lang-en #pk-copy, .pk-lang-en #pk-cut, .pk-lang-en #pk-paste { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1360px) {\r\n        .pk-lang-ja #pk-copy span, .pk-lang-ja #pk-cut span, .pk-lang-ja #pk-paste span { display: none; }\r\n        .pk-lang-ja #pk-copy, .pk-lang-ja #pk-cut, .pk-lang-ja #pk-paste { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1250px) {\r\n        .pk-lang-zh #pk-copy span, .pk-lang-zh #pk-cut span, .pk-lang-zh #pk-paste span { display: none; }\r\n        .pk-lang-zh #pk-copy, .pk-lang-zh #pk-cut, .pk-lang-zh #pk-paste { padding: 0 8px; }\r\n    }\r\n\r\n    /* 3ë‹¨ê³„: 'íŒŒì¼ ê´€ë¦¬' ê·¸ë£¹ (File Ops - ìƒˆí´ë”/ì‚­ì œ ë“±) */\r\n    @media (max-width: 1140px) {\r\n        .pk-lang-ko #pk-newfolder span, .pk-lang-ko #pk-del span, .pk-lang-ko #pk-deselect span { display: none; }\r\n        .pk-lang-ko #pk-newfolder, .pk-lang-ko #pk-del, .pk-lang-ko #pk-deselect { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1180px) {\r\n        .pk-lang-en #pk-newfolder span, .pk-lang-en #pk-del span, .pk-lang-en #pk-deselect span { display: none; }\r\n        .pk-lang-en #pk-newfolder, .pk-lang-en #pk-del, .pk-lang-en #pk-deselect { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1230px) {\r\n        .pk-lang-ja #pk-newfolder span, .pk-lang-ja #pk-del span, .pk-lang-ja #pk-deselect span { display: none; }\r\n        .pk-lang-ja #pk-newfolder, .pk-lang-ja #pk-del, .pk-lang-ja #pk-deselect { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1120px) {\r\n        .pk-lang-zh #pk-newfolder span, .pk-lang-zh #pk-del span, .pk-lang-zh #pk-deselect span { display: none; }\r\n        .pk-lang-zh #pk-newfolder, .pk-lang-zh #pk-del, .pk-lang-zh #pk-deselect { padding: 0 8px; }\r\n    }\r\n\r\n    /* 4ë‹¨ê³„: 'íƒìƒ‰' ê·¸ë£¹ (Navigation - ë’¤ë¡œ/ì•ìœ¼ë¡œ) */\r\n    @media (max-width: 1020px) {\r\n        .pk-lang-ko #pk-nav-back span, .pk-lang-ko #pk-nav-fwd span, .pk-lang-ko .pk-dup-lbl { display: none; }\r\n        .pk-lang-ko #pk-nav-back, .pk-lang-ko #pk-nav-fwd { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1060px) {\r\n        .pk-lang-en #pk-nav-back span, .pk-lang-en #pk-nav-fwd span, .pk-lang-en .pk-dup-lbl { display: none; }\r\n        .pk-lang-en #pk-nav-back, .pk-lang-en #pk-nav-fwd { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1110px) {\r\n        .pk-lang-ja #pk-nav-back span, .pk-lang-ja #pk-nav-fwd span, .pk-lang-ja .pk-dup-lbl { display: none; }\r\n        .pk-lang-ja #pk-nav-back, .pk-lang-ja #pk-nav-fwd { padding: 0 8px; }\r\n    }\r\n    @media (max-width: 1000px) {\r\n        .pk-lang-zh #pk-nav-back span, .pk-lang-zh #pk-nav-fwd span, .pk-lang-zh .pk-dup-lbl { display: none; }\r\n        .pk-lang-zh #pk-nav-back, .pk-lang-zh #pk-nav-fwd { padding: 0 8px; }\r\n    }\r\n\r\n    /* Unified Duplicate Toolbar Style */\r\n    .pk-dup-toolbar { display:none; align-items:center; gap:4px; padding:0 8px; height:100%; margin-left:8px; overflow-x: auto; scrollbar-width: none; background: transparent; border: none; }\r\n    .pk-dup-lbl { font-weight: 500; color: var(--pk-fg); font-size: 13px; margin-right: 6px; opacity: 0.8; white-space: nowrap; flex-shrink: 0; }\r\n    .pk-btn-toggle { border: 1px solid var(--pk-bd); background: var(--pk-bg); color: var(--pk-fg); height: 30px; border-radius: 4px; padding: 0 10px; font-size: 12px; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; white-space: nowrap; flex-shrink: 0; }\r\n    .pk-btn-toggle:hover { background: var(--pk-btn-hov); border-color: var(--pk-pri); }\r\n    .pk-btn-toggle span { font-weight: 700; color: var(--pk-pri); }\r\n\r\n    /* Search Bar Style (Left Icon) */\r\n    .pk-search { position: relative; display: flex; align-items: center; margin-right: 10px; }\r\n    .pk-search input { \r\n        height: 32px; \r\n        padding: 0 10px 0 32px; /* ì™¼ìª½ ì—¬ë°±ì„ ëŠ˜ë ¤ì„œ ì•„ì´ì½˜ ê³µê°„ í™•ë³´ */\r\n        border: 1px solid var(--pk-bd); \r\n        border-radius: 4px; \r\n        background: var(--pk-bg); \r\n        color: var(--pk-fg); \r\n        font-size: 13px; \r\n        width: 180px; \r\n        transition: width 0.2s, border-color 0.2s; \r\n    }\r\n    .pk-search input:focus { width: 260px; border-color: var(--pk-pri); outline: none; }\r\n    \r\n    /* ì•„ì´ì½˜ ìœ„ì¹˜ë¥¼ ì™¼ìª½(left)ìœ¼ë¡œ ë³€ê²½ */\r\n    .pk-search svg { position: absolute; left: 10px; width: 14px; height: 14px; color: #888; pointer-events: none; }\r\n\r\n    /* ëª¨ë°”ì¼ ëŒ€ì‘ */\r\n    @media (max-width: 1024px) { \r\n        .pk-search input:focus { width: 180px; } \r\n    }\r\n\r\n    /* Navigation Bar Fix */\r\n    .pk-nav { display: flex; align-items: center; gap: 4px; overflow: hidden; white-space: nowrap; font-size: 13px; color: #666; margin: 0 8px; max-width: 60%; }\r\n    .pk-nav span { cursor: pointer; padding: 2px 6px; border-radius: 4px; } .pk-nav span:hover { background: var(--pk-hl); color: var(--pk-fg); }\r\n    .pk-nav span.act { font-weight: 600; color: var(--pk-fg); cursor: default; }\r\n\r\n    /* Group Header Style */\r\n    .pk-group-hd { background: var(--pk-gh); color: var(--pk-gh-fg); font-weight: bold; display: flex; align-items: center; padding: 0 16px; border-bottom: 1px solid var(--pk-bd); border-top: 1px solid var(--pk-bd); margin-top: -1px; min-height: 32px; }\r\n    .pk-group-hd .pk-tag { margin-left: auto; background: #666; color: #fff; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; border: 1px solid #555; }\r\n    .pk-group-hd .pk-cnt { margin-left: 10px; color: var(--pk-fg); font-size: 12px; opacity: 0.9; }\r\n\r\n    .pk-loading-ov { position: absolute; inset: 0; background: rgba(255,255,255,0.8); z-index: 999; display: none; flex-direction: column; align-items: center; justify-content: center; color: var(--pk-fg); gap: 20px; backdrop-filter: blur(2px); }\r\n    @media (prefers-color-scheme: dark) { .pk-loading-ov { background: rgba(0,0,0,0.8); } }\r\n    .pk-spin-lg { width: 48px; height: 48px; border: 5px solid rgba(128,128,128,0.2); border-top-color: var(--pk-pri); border-radius: 50%; animation: spin 0.8s infinite; }\r\n    .pk-loading-txt { font-size: 15px; font-weight: 600; text-align: center; white-space: pre-line; line-height: 1.5; }\r\n    .pk-stop-btn { padding: 8px 20px; background: #d93025; color: white; border: none; border-radius: 20px; font-size: 14px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 10px rgba(217,48,37,0.3); transition: transform 0.1s; }\r\n    .pk-stop-btn:hover { background: #b02a20; transform: scale(1.05); }\r\n    .pk-stop-btn:active { transform: scale(0.95); }\r\n    .pk-grid-hd { display: grid; grid-template-columns: 40px 1fr 90px 80px 140px; padding: 0 16px; height: 36px; align-items: center; border-bottom: 1px solid var(--pk-bd); font-size: 12px; color: #666; user-select: none; }\r\n    .pk-col { cursor: pointer; font-weight: 600; } .pk-col:hover { color: var(--pk-fg); }\r\n    .pk-vp { flex: 1; overflow-y: auto; position: relative; scrollbar-width: thin; background: var(--pk-bg); }\r\n    .pk-in { position: absolute; width: 100%; top: 0; }\r\n    .pk-row { display: grid; grid-template-columns: 40px 1fr 90px 80px 140px; height: 40px; align-items: center; padding: 0 16px; font-size: 13px; border-bottom: 1px solid transparent; cursor: default; color: var(--pk-fg); box-sizing: border-box; }\r\n    .pk-row:hover { background: var(--pk-hl); }\r\n    .pk-row.sel { background: var(--pk-sel-bg); border-color: transparent; }\r\n    .pk-name { display: flex; align-items: center; gap: 8px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\r\n    .pk-ft { height: 48px; border-top: 1px solid var(--pk-bd); background: var(--pk-bg); display: flex; align-items: center; padding: 0 16px; justify-content: space-between; font-size: 12px; }\r\n    .pk-stat { color: #949494; font-size: 12px; }\r\n    .pk-grp { display: flex; gap: 8px; }\r\n    .pk-pop { position: fixed; pointer-events: none; z-index: 10002; background: #000; border: 1px solid #333; box-shadow: 0 8px 24px rgba(0,0,0,0.4); border-radius: 6px; display: none; overflow: hidden; }\r\n    .pk-pop img { display: block; max-width: 320px; max-height: 240px; object-fit: contain; }\r\n    /* Dup Visuals - Removed old row styles */\r\n    .pk-ctx { position: fixed; z-index: 10003; background: var(--pk-bg); border: 1px solid var(--pk-bd); border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); min-width: 150px; padding: 4px 0; display: none; }\r\n    .pk-ctx-item { padding: 8px 16px; font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 8px; color: var(--pk-fg); }\r\n    .pk-ctx-item:hover { background: var(--pk-hl); }\r\n    .pk-ctx-sep { height: 1px; background: var(--pk-bd); margin: 4px 0; }\r\n    .pk-modal-ov { position: absolute; inset: 0; background: rgba(0,0,0,0.5); z-index: 10001; display: flex; align-items: center; justify-content: center; }\r\n    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼: ìŠ¤í¬ë¡¤ ì¶”ê°€ */\r\n    .pk-modal { background: var(--pk-bg); padding: 25px; border-radius: 12px; width: 500px; max-height: 85vh; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; border: 1px solid var(--pk-bd); box-shadow: 0 10px 40px rgba(0,0,0,0.4); }\r\n    .pk-modal h3 { margin: 0 0 5px 0; font-size: 16px; border-bottom: 1px solid var(--pk-bd); padding-bottom: 10px; }\r\n    .pk-field { display: flex; flex-direction: column; gap: 5px; font-size: 13px; }\r\n    .pk-field input, .pk-field select { padding: 6px; border: 1px solid var(--pk-bd); border-radius: 4px; background: var(--pk-bg); color: var(--pk-fg); }\r\n    .pk-modal-act { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }\r\n    .pk-credit { font-size: 12px; color: #888; text-align: center; margin-top: 20px; border-top: 1px solid var(--pk-bd); padding-top: 10px; }\r\n    .pk-credit a { color: #888; text-decoration: none; } /* Changed to Gray */\r\n    .pk-credit a:hover { text-decoration: underline; }\r\n    .pk-prev-list { flex: 1; overflow-y: auto; border: 1px solid var(--pk-bd); max-height: 300px; }\r\n    .pk-prev-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 5px 10px; border-bottom: 1px solid var(--pk-bd); font-size: 12px; }\r\n    .pk-prev-row:nth-child(odd) { background: var(--pk-hl); }\r\n    @media (max-width: 1024px) { .pk-win { width: 90vw; min-width: 600px; } .pk-btn { padding: 0 8px; font-size: 12px; gap: 4px; } .pk-tt { font-size: 16px; } .pk-grid-hd, .pk-row { font-size: 11px; } }\r\n`;\n\n//# sourceURL=webpack://PikPak-FileManager/./src/style.js?\n}");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   esc: () => (/* binding */ esc),\n/* harmony export */   fmtDate: () => (/* binding */ fmtDate),\n/* harmony export */   fmtDur: () => (/* binding */ fmtDur),\n/* harmony export */   fmtSize: () => (/* binding */ fmtSize),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nconst sleep = ms => new Promise(r => setTimeout(r, ms));\r\n\r\nconst esc = s => (s || '').replace(/[&<>\"']/g, m => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;' }[m]));\r\n\r\nconst fmtSize = n => {\r\n    n = parseInt(n || 0, 10); if (!n) return '';\r\n    const u = ['B', 'KB', 'MB', 'GB', 'TB']; let i = 0;\r\n    while (n >= 1024 && i < u.length - 1) { n /= 1024; i++; }\r\n    return (n < 10 ? n.toFixed(2) : n.toFixed(1)) + ' ' + u[i];\r\n};\r\n\r\nconst fmtDate = t => t ? new Date(t).toLocaleDateString() : '-';\r\n\r\nconst fmtDur = s => {\r\n    if (!s) return ''; s = parseInt(s, 10);\r\n    const h = Math.floor(s / 3600), m = Math.floor((s % 3600) / 60), sc = s % 60;\r\n    return (h > 0 ? h + ':' : '') + String(m).padStart(2, '0') + ':' + String(sc).padStart(2, '0');\r\n};\n\n//# sourceURL=webpack://PikPak-FileManager/./src/utils.js?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;